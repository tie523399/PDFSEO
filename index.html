<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Master - å°ˆæ¥­ç·šä¸ŠPDFç·¨è¼¯å™¨ | å…è²»PDFå·¥å…·</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="PDF Master æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼·å¤§çš„ç·šä¸ŠPDFç·¨è¼¯å™¨ï¼Œæä¾›PDFç·¨è¼¯ã€åˆä½µã€åˆ†å‰²ã€è½‰æ›ç­‰åŠŸèƒ½ã€‚æ”¯æ´10ç¨®èªè¨€ï¼Œå®Œå…¨å…è²»ä½¿ç”¨ã€‚">
    <meta name="keywords" content="PDFç·¨è¼¯å™¨, PDF editor, PDFå·¥å…·, PDFè½‰æ›, PDFåˆä½µ, PDFåˆ†å‰², ç·šä¸ŠPDF, å…è²»PDFç·¨è¼¯å™¨, PDF Master">
    <meta name="author" content="PDF Master Team">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="PDF Master - å°ˆæ¥­ç·šä¸ŠPDFç·¨è¼¯å™¨">
    <meta property="og:description" content="åŠŸèƒ½å¼·å¤§çš„ç·šä¸ŠPDFç·¨è¼¯å™¨ï¼Œæ”¯æ´ç·¨è¼¯ã€åˆä½µã€åˆ†å‰²ã€è½‰æ›ç­‰åŠŸèƒ½">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pdfmaster.com">
    <meta property="og:image" content="https://pdfmaster.com/images/og-image.png">
    <meta property="og:site_name" content="PDF Master">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">
    <meta property="og:locale:alternate" content="ja_JP">
    <meta property="og:locale:alternate" content="ko_KR">
    <meta property="og:locale:alternate" content="es_ES">
    <meta property="og:locale:alternate" content="fr_FR">
    <meta property="og:locale:alternate" content="de_DE">
    <meta property="og:locale:alternate" content="pt_BR">
    <meta property="og:locale:alternate" content="ru_RU">
    <meta property="og:locale:alternate" content="ar_SA">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PDF Master - å°ˆæ¥­ç·šä¸ŠPDFç·¨è¼¯å™¨">
    <meta name="twitter:description" content="åŠŸèƒ½å¼·å¤§çš„ç·šä¸ŠPDFç·¨è¼¯å™¨ï¼Œæ”¯æ´ç·¨è¼¯ã€åˆä½µã€åˆ†å‰²ã€è½‰æ›ç­‰åŠŸèƒ½">
    <meta name="twitter:image" content="https://pdfmaster.com/images/twitter-card.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://pdfmaster.com">
    
    <!-- Language Alternates -->
    <link rel="alternate" hreflang="zh-TW" href="https://pdfmaster.com/zh-tw">
    <link rel="alternate" hreflang="en" href="https://pdfmaster.com/en">
    <link rel="alternate" hreflang="zh-CN" href="https://pdfmaster.com/zh-cn">
    <link rel="alternate" hreflang="ja" href="https://pdfmaster.com/ja">
    <link rel="alternate" hreflang="ko" href="https://pdfmaster.com/ko">
    <link rel="alternate" hreflang="es" href="https://pdfmaster.com/es">
    <link rel="alternate" hreflang="fr" href="https://pdfmaster.com/fr">
    <link rel="alternate" hreflang="de" href="https://pdfmaster.com/de">
    <link rel="alternate" hreflang="pt" href="https://pdfmaster.com/pt">
    <link rel="alternate" hreflang="ru" href="https://pdfmaster.com/ru">
    <link rel="alternate" hreflang="ar" href="https://pdfmaster.com/ar">
    <link rel="alternate" hreflang="hi" href="https://pdfmaster.com/hi">
    <link rel="alternate" hreflang="it" href="https://pdfmaster.com/it">
    <link rel="alternate" hreflang="nl" href="https://pdfmaster.com/nl">
    <link rel="alternate" hreflang="pl" href="https://pdfmaster.com/pl">
    <link rel="alternate" hreflang="tr" href="https://pdfmaster.com/tr">
    <link rel="alternate" hreflang="vi" href="https://pdfmaster.com/vi">
    <link rel="alternate" hreflang="th" href="https://pdfmaster.com/th">
    <link rel="alternate" hreflang="id" href="https://pdfmaster.com/id">
    <link rel="alternate" hreflang="sv" href="https://pdfmaster.com/sv">
    <link rel="alternate" hreflang="x-default" href="https://pdfmaster.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "PDF Master",
        "description": "å°ˆæ¥­ç·šä¸ŠPDFç·¨è¼¯å™¨ï¼Œæä¾›å®Œæ•´çš„PDFè™•ç†åŠŸèƒ½",
        "url": "https://pdfmaster.com",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "2543"
        }
    }
    </script>
    
    <!-- è¼‰å…¥å¿…è¦çš„åº« -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #1557b0;
            --secondary: #34a853;
            --danger: #ea4335;
            --warning: #fbbc04;
            --dark: #202124;
            --light: #f8f9fa;
            --border: #dadce0;
            --shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-hover: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
            --radius: 8px;
            --transition: all 0.3s cubic-bezier(.25,.8,.25,1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f0f2f5;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* é ‚éƒ¨å·¥å…·åˆ— */
        .header {
            background: white;
            border-bottom: 1px solid var(--border);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: var(--shadow);
            z-index: 1000;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .toolbar {
            display: flex;
            gap: 10px;
            align-items: center;
            flex: 1;
        }
        
        .tool-group {
            display: flex;
            gap: 5px;
            padding: 0 10px;
            border-right: 1px solid var(--border);
        }
        
        .tool-group:last-child {
            border-right: none;
        }
        
        .tool-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            color: var(--dark);
            border-radius: var(--radius);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            position: relative;
        }
        
        .tool-btn:hover {
            background: var(--light);
        }
        
        .tool-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .tool-btn[data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }
        
        /* ä¸»è¦å…§å®¹å€ */
        .main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }
        
        /* å´é‚Šæ¬„ */
        .sidebar {
            width: 250px;
            background: white;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }
        
        .sidebar.collapsed {
            width: 60px;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .sidebar-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .page-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .page-item {
            border: 2px solid transparent;
            border-radius: var(--radius);
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            background: white;
            overflow: hidden;
        }
        
        .page-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }
        
        .page-item.active {
            border-color: var(--primary);
            box-shadow: var(--shadow-hover);
        }
        
        .page-thumbnail {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .page-number {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        /* ç·¨è¼¯å€åŸŸ */
        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #e8eaed;
            position: relative;
            overflow: hidden;
        }
        
        .editor-toolbar {
            background: white;
            padding: 10px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .zoom-btn {
            width: 30px;
            height: 30px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .zoom-btn:hover {
            background: var(--light);
        }
        
        .zoom-level {
            min-width: 60px;
            text-align: center;
            font-weight: 500;
        }
        
        .canvas-wrapper {
            flex: 1;
            overflow: auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .pdf-canvas-container {
            position: relative;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: var(--radius);
            overflow: hidden;
        }
        
        #pdf-canvas {
            display: block;
        }
        
        #fabric-canvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: crosshair;
        }
        
        /* å±¬æ€§é¢æ¿ */
        .properties-panel {
            width: 300px;
            background: white;
            border-left: 1px solid var(--border);
            padding: 20px;
            display: none;
            overflow-y: auto;
        }
        
        .properties-panel.active {
            display: block;
        }
        
        .property-group {
            margin-bottom: 20px;
        }
        
        .property-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            display: block;
        }
        
        .property-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .property-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .color-picker {
            width: 40px;
            height: 40px;
            border: 1px solid var(--border);
            border-radius: 4px;
            cursor: pointer;
        }
        
        /* æµ®å‹•å·¥å…·é¢æ¿ */
        .floating-tools {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border-radius: 30px;
            padding: 10px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            gap: 15px;
            z-index: 1000;
        }
        
        .floating-tool {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            color: var(--dark);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 18px;
        }
        
        .floating-tool:hover {
            background: var(--light);
            transform: scale(1.1);
        }
        
        .floating-tool.active {
            background: var(--primary);
            color: white;
        }
        
        /* ä¸Šå‚³å€åŸŸ */
        .upload-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            max-width: 400px;
            width: 90%;
        }
        
        .upload-icon {
            font-size: 64px;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .upload-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .upload-subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        
        .upload-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-block;
        }
        
        .upload-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        #file-input {
            display: none;
        }
        
        /* è¼‰å…¥å‹•ç•« */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .spinner {
            border: 4px solid var(--light);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* å³éµé¸å–® */
        .context-menu {
            position: fixed;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            padding: 8px 0;
            min-width: 200px;
            display: none;
            z-index: 2000;
        }
        
        .context-menu-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }
        
        .context-menu-item:hover {
            background: var(--light);
        }
        
        .context-menu-item i {
            width: 20px;
            color: #666;
        }
        
        /* æ¨¡æ…‹æ¡† */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 20px;
            border: none;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background: #e8eaed;
        }
        
        /* æ–‡å­—ç·¨è¼¯å™¨ */
        .text-editor {
            position: absolute;
            background: white;
            border: 2px solid var(--primary);
            border-radius: 4px;
            padding: 5px;
            display: none;
            z-index: 1500;
        }
        
        .text-editor textarea {
            border: none;
            outline: none;
            resize: none;
            font-family: inherit;
            min-width: 200px;
            min-height: 30px;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .sidebar {
                position: absolute;
                left: -250px;
                height: 100%;
                z-index: 1500;
                transition: left 0.3s ease;
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            .properties-panel {
                position: absolute;
                right: -300px;
                height: 100%;
                z-index: 1500;
                transition: right 0.3s ease;
            }
            
            .properties-panel.mobile-open {
                right: 0;
            }
            
            .floating-tools {
                bottom: 10px;
                padding: 8px 15px;
            }
            
            .floating-tool {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }
        
        /* ç‹€æ…‹åˆ— */
        .status-bar {
            background: white;
            border-top: 1px solid var(--border);
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #666;
        }
        
        /* å¿«æ·éµæç¤º */
        .shortcut-hint {
            background: var(--dark);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 5px;
        }
        
        /* èªè¨€é¸æ“‡å™¨ */
        .language-selector {
            position: relative;
            margin-left: auto;
            margin-right: 10px;
        }
        
        .language-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .language-btn:hover {
            background: var(--light);
            border-color: var(--primary);
        }
        
        .language-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 5px;
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            min-width: 200px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }
        
        .language-menu.active {
            display: block;
        }
        
        .language-menu a {
            display: block;
            padding: 10px 16px;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .language-menu a:hover {
            background: var(--light);
            color: var(--primary);
        }
        
        /* å°ç« æ¨£å¼ */
        .stamp-preview {
            width: 100px;
            height: 100px;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px auto;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .stamp-preview:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .stamp-preview img {
            max-width: 90%;
            max-height: 90%;
        }
        
        /* ç°½åæ¿ */
        .signature-pad {
            border: 2px solid var(--border);
            border-radius: var(--radius);
            background: white;
            cursor: crosshair;
            margin: 10px 0;
        }
        
        .signature-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        /* åœ–ç‰‡ä¸Šå‚³å€åŸŸ */
        .image-upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .image-upload-area:hover {
            border-color: var(--primary);
            background: var(--light);
        }
        
        .image-upload-area i {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        /* æ–°èå»£å‘Šæ¬„ */
        .news-ticker {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #1a73e8 0%, #34a853 50%, #fbbc04 100%);
            color: white;
            padding: 10px 20px;
            z-index: 4000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
            }
            to {
                transform: translateY(0);
            }
        }
        
        .news-ticker-content {
            display: flex;
            align-items: center;
            flex: 1;
            overflow: hidden;
        }
        
        .news-label {
            font-weight: bold;
            margin-right: 20px;
            white-space: nowrap;
        }
        
        .news-items {
            flex: 1;
            overflow: hidden;
            position: relative;
            height: 20px;
        }
        
        .news-item {
            position: absolute;
            white-space: nowrap;
            animation: newsScroll 20s linear infinite;
        }
        
        @keyframes newsScroll {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        
        .news-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .news-close:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* èª¿æ•´ä¸»é«”å…§å®¹ï¼Œç‚ºæ–°èæ¬„ç•™å‡ºç©ºé–“ */
        body.news-active {
            padding-top: 50px;
        }
        
        /* Bot é¢æ¿ */
        .bot-panel {
            position: fixed;
            right: 20px;
            bottom: 80px;
            width: 350px;
            max-height: 600px;
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 3000;
            display: none;
            flex-direction: column;
            animation: slideUp 0.3s ease-out;
        }
        
        .bot-panel.active {
            display: flex;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .bot-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            border-radius: var(--radius) var(--radius) 0 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .bot-minimize {
            margin-left: auto;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: var(--transition);
        }
        
        .bot-minimize:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .bot-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .bot-section {
            margin-bottom: 25px;
        }
        
        .bot-section h4 {
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 16px;
        }
        
        .bot-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .bot-btn {
            background: var(--light);
            border: 1px solid var(--border);
            padding: 10px 15px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--dark);
        }
        
        .bot-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .bot-btn i {
            font-size: 16px;
        }
        
        /* Bot è§¸ç™¼æŒ‰éˆ• */
        .bot-trigger {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: var(--transition);
            z-index: 2999;
        }
        
        .bot-trigger:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .bot-trigger:active {
            transform: scale(0.95);
        }
        
        /* æ–°èç®¡ç†æ¨¡æ…‹æ¡† */
        .news-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow-hover);
            z-index: 5000;
            max-width: 500px;
            width: 90%;
            display: none;
        }
        
        .news-modal.active {
            display: block;
        }
        
        .news-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .news-form input,
        .news-form textarea {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-family: inherit;
        }
        
        .news-form textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* å»£å‘Šæ©«å¹… */
        .ad-banner {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            padding: 15px 30px;
            box-shadow: var(--shadow-hover);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 2000;
        }
        
        .ad-banner.active {
            display: flex;
        }
        
        .ad-banner-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .ad-banner-close {
            background: var(--danger);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- é ­éƒ¨å·¥å…·åˆ— -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-file-pdf"></i>
            PDF Master
        </div>
        
        <div class="toolbar">
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="openFile" onclick="openFile()">
                    <i class="fas fa-folder-open"></i>
                </button>
                <button class="tool-btn" data-tooltip="save" onclick="savePDF()">
                    <i class="fas fa-save"></i>
                </button>
                <button class="tool-btn" data-tooltip="export" onclick="exportPDF()">
                    <i class="fas fa-download"></i>
                </button>
            </div>
            
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="undo" onclick="undo()">
                    <i class="fas fa-undo"></i>
                </button>
                <button class="tool-btn" data-tooltip="redo" onclick="redo()">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
            
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="cut" onclick="cut()">
                    <i class="fas fa-cut"></i>
                </button>
                <button class="tool-btn" data-tooltip="copy" onclick="copy()">
                    <i class="fas fa-copy"></i>
                </button>
                <button class="tool-btn" data-tooltip="paste" onclick="paste()">
                    <i class="fas fa-paste"></i>
                </button>
            </div>
            
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="addPage" onclick="addPage()">
                    <i class="fas fa-plus-circle"></i>
                </button>
                <button class="tool-btn" data-tooltip="deletePage" onclick="deletePage()">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="tool-btn" data-tooltip="reorderPages" onclick="reorderPages()">
                    <i class="fas fa-sort"></i>
                </button>
            </div>
            
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="rotatePage" onclick="rotatePage(90)">
                    <i class="fas fa-redo-alt"></i>
                </button>
                <button class="tool-btn" data-tooltip="extractText" onclick="extractText()">
                    <i class="fas fa-file-alt"></i>
                </button>
                <button class="tool-btn" data-tooltip="addWatermark" onclick="addWatermark()">
                    <i class="fas fa-tint"></i>
                </button>
            </div>
            
            <div class="tool-group">
                <button class="tool-btn" data-tooltip="mergePDF" onclick="mergePDFs()">
                    <i class="fas fa-object-group"></i>
                </button>
                <button class="tool-btn" data-tooltip="splitPDF" onclick="splitPDF()">
                    <i class="fas fa-cut"></i>
                </button>
            </div>
        </div>
        
        <button class="tool-btn" data-tooltip="settings" onclick="openSettings()">
            <i class="fas fa-cog"></i>
        </button>
        
        <!-- èªè¨€é¸æ“‡å™¨ -->
        <div class="language-selector">
            <button class="language-btn" onclick="toggleLanguageMenu()">
                <i class="fas fa-globe"></i>
                <span id="current-lang">ç¹é«”ä¸­æ–‡</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <div class="language-menu" id="language-menu">
                <a href="#" onclick="changeLanguage('zh-TW')">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</a>
                <a href="#" onclick="changeLanguage('en')">ğŸ‡ºğŸ‡¸ English</a>
                <a href="#" onclick="changeLanguage('zh-CN')">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</a>
                <a href="#" onclick="changeLanguage('ja')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</a>
                <a href="#" onclick="changeLanguage('ko')">ğŸ‡°ğŸ‡· í•œêµ­ì–´</a>
                <a href="#" onclick="changeLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</a>
                <a href="#" onclick="changeLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</a>
                <a href="#" onclick="changeLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</a>
                <a href="#" onclick="changeLanguage('pt')">ğŸ‡§ğŸ‡· PortuguÃªs</a>
                <a href="#" onclick="changeLanguage('ru')">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</a>
                <a href="#" onclick="changeLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
                <a href="#" onclick="changeLanguage('hi')">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</a>
                <a href="#" onclick="changeLanguage('it')">ğŸ‡®ğŸ‡¹ Italiano</a>
                <a href="#" onclick="changeLanguage('nl')">ğŸ‡³ğŸ‡± Nederlands</a>
                <a href="#" onclick="changeLanguage('pl')">ğŸ‡µğŸ‡± Polski</a>
                <a href="#" onclick="changeLanguage('tr')">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</a>
                <a href="#" onclick="changeLanguage('vi')">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</a>
                <a href="#" onclick="changeLanguage('th')">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢</a>
                <a href="#" onclick="changeLanguage('id')">ğŸ‡®ğŸ‡© Bahasa Indonesia</a>
                <a href="#" onclick="changeLanguage('sv')">ğŸ‡¸ğŸ‡ª Svenska</a>
            </div>
        </div>
    </header>
    
    <!-- ä¸»è¦å®¹å™¨ -->
    <div class="main-container">
        <!-- å´é‚Šæ¬„ - é é¢ç¸®åœ– -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3 class="sidebar-title" data-i18n="pages">é é¢</h3>
            </div>
            <div class="page-list" id="page-list">
                <!-- é é¢ç¸®åœ–å°‡å‹•æ…‹æ’å…¥é€™è£¡ -->
            </div>
        </aside>
        
        <!-- ç·¨è¼¯å€åŸŸ -->
        <main class="editor-container">
            <!-- ç·¨è¼¯å™¨å·¥å…·åˆ— -->
            <div class="editor-toolbar">
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomOut()">
                        <i class="fas fa-minus"></i>
                    </button>
                    <span class="zoom-level" id="zoom-level">100%</span>
                    <button class="zoom-btn" onclick="zoomIn()">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="zoom-btn" onclick="fitToPage()">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
                
                <div class="page-navigation">
                    <button class="zoom-btn" onclick="previousPage()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <span id="page-info">1 / 1</span>
                    <button class="zoom-btn" onclick="nextPage()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- Canvas åŒ…è£å™¨ -->
            <div class="canvas-wrapper" id="canvas-wrapper">
                <!-- ä¸Šå‚³å€åŸŸ -->
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h2 class="upload-title" data-i18n="uploadPDF">ä¸Šå‚³PDFæª”æ¡ˆ</h2>
                    <p class="upload-subtitle" data-i18n="dragDropFile">æ‹–æ”¾æª”æ¡ˆåˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ</p>
                    <label for="file-input" class="upload-btn" data-i18n="selectFile">é¸æ“‡æª”æ¡ˆ</label>
                    <input type="file" id="file-input" accept=".pdf" onchange="handleFileSelect(event)">
                </div>
                
                <!-- PDF Canvas -->
                <div class="pdf-canvas-container" id="pdf-canvas-container" style="display: none;">
                    <canvas id="pdf-canvas"></canvas>
                    <canvas id="fabric-canvas"></canvas>
                </div>
                
                <!-- è¼‰å…¥å‹•ç•« -->
                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p data-i18n="loading">æ­£åœ¨è¼‰å…¥PDF...</p>
                </div>
            </div>
        </main>
        
        <!-- å±¬æ€§é¢æ¿ -->
        <aside class="properties-panel" id="properties-panel">
            <h3 style="margin-bottom: 20px;" data-i18n="properties">å±¬æ€§</h3>
            
            <div class="property-group">
                <label class="property-label" data-i18n="fillColor">å¡«å……é¡è‰²</label>
                <input type="color" class="color-picker" id="fill-color" onchange="updateObjectProperty('fill')">
            </div>
            
            <div class="property-group">
                <label class="property-label" data-i18n="strokeColor">é‚Šæ¡†é¡è‰²</label>
                <input type="color" class="color-picker" id="stroke-color" onchange="updateObjectProperty('stroke')">
            </div>
            
            <div class="property-group">
                <label class="property-label" data-i18n="strokeWidth">é‚Šæ¡†å¯¬åº¦</label>
                <input type="range" class="property-control" id="stroke-width" min="1" max="10" value="2" onchange="updateObjectProperty('strokeWidth')">
            </div>
            
            <div class="property-group">
                <label class="property-label" data-i18n="opacity">é€æ˜åº¦</label>
                <input type="range" class="property-control" id="opacity" min="0" max="100" value="100" onchange="updateObjectProperty('opacity')">
            </div>
            
            <div class="property-group">
                <label class="property-label" data-i18n="fontSize">å­—é«”å¤§å°</label>
                <input type="number" class="property-control" id="font-size" min="8" max="72" value="16" onchange="updateObjectProperty('fontSize')">
            </div>
            
            <div class="property-group">
                <label class="property-label" data-i18n="fontFamily">å­—é«”</label>
                <select class="property-control" id="font-family" onchange="updateObjectProperty('fontFamily')">
                    <option value="Arial">Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Helvetica">Helvetica</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Courier New">Courier New</option>
                </select>
            </div>
        </aside>
    </div>
    
    <!-- æµ®å‹•å·¥å…·é¢æ¿ -->
    <div class="floating-tools">
        <button class="floating-tool active" data-tool="select" onclick="setTool('select')" title="é¸æ“‡">
            <i class="fas fa-mouse-pointer"></i>
        </button>
        <button class="floating-tool" data-tool="text" onclick="setTool('text')" title="æ–‡å­—">
            <i class="fas fa-font"></i>
        </button>
        <button class="floating-tool" data-tool="draw" onclick="setTool('draw')" title="ç¹ªåœ–">
            <i class="fas fa-pencil-alt"></i>
        </button>
        <button class="floating-tool" data-tool="shape" onclick="setTool('shape')" title="å½¢ç‹€">
            <i class="fas fa-shapes"></i>
        </button>
        <button class="floating-tool" data-tool="image" onclick="setTool('image')" title="åœ–ç‰‡">
            <i class="fas fa-image"></i>
        </button>
        <button class="floating-tool" data-tool="highlight" onclick="setTool('highlight')" title="è¢å…‰ç­†">
            <i class="fas fa-highlighter"></i>
        </button>
        <button class="floating-tool" data-tool="stamp" onclick="setTool('stamp')" title="å°ç« ">
            <i class="fas fa-stamp"></i>
        </button>
        <button class="floating-tool" data-tool="signature" onclick="setTool('signature')" title="ç°½å">
            <i class="fas fa-signature"></i>
        </button>
    </div>
    
    <!-- æ–°èå»£å‘Šæ¬„ -->
    <div class="news-ticker" id="news-ticker">
        <div class="news-ticker-content">
            <span class="news-label">ğŸ“¢ æœ€æ–°æ¶ˆæ¯ï¼š</span>
            <div class="news-items" id="news-items">
                <span class="news-item active">æ­¡è¿ä½¿ç”¨ PDF Master - æ‚¨çš„å°ˆæ¥­ PDF ç·¨è¼¯åŠ©æ‰‹ï¼</span>
            </div>
        </div>
        <button class="news-close" onclick="toggleNewsTicker()">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- ç‹€æ…‹åˆ— -->
    <div class="status-bar">
        <div>
            <span id="status-message">å°±ç·’</span>
        </div>
        <div>
            <span>Ctrl+Z å¾©åŸ</span>
            <span style="margin-left: 10px;">Ctrl+S å„²å­˜</span>
            <span style="margin-left: 10px;">Ctrl+O é–‹å•Ÿ</span>
        </div>
    </div>
    
    <!-- ç®¡ç†æ©Ÿå™¨äººé¢æ¿ -->
    <div class="bot-panel" id="bot-panel">
        <div class="bot-header">
            <i class="fas fa-robot"></i>
            <span>PDF Bot ç®¡ç†åŠ©æ‰‹</span>
            <button class="bot-minimize" onclick="toggleBotPanel()">
                <i class="fas fa-minus"></i>
            </button>
        </div>
        <div class="bot-body">
            <div class="bot-section">
                <h4>ğŸ“° æ–°èç®¡ç†</h4>
                <div class="bot-buttons">
                    <button class="bot-btn" onclick="botAction('addNews')">
                        <i class="fas fa-plus"></i> æ–°å¢æ–°è
                    </button>
                    <button class="bot-btn" onclick="botAction('editNews')">
                        <i class="fas fa-edit"></i> ç·¨è¼¯æ–°è
                    </button>
                    <button class="bot-btn" onclick="botAction('deleteNews')">
                        <i class="fas fa-trash"></i> åˆªé™¤æ–°è
                    </button>
                    <button class="bot-btn" onclick="botAction('scheduleNews')">
                        <i class="fas fa-clock"></i> æ’ç¨‹ç™¼å¸ƒ
                    </button>
                </div>
            </div>
            
            <div class="bot-section">
                <h4>ğŸ“Š å»£å‘Šç®¡ç†</h4>
                <div class="bot-buttons">
                    <button class="bot-btn" onclick="botAction('addAd')">
                        <i class="fas fa-ad"></i> æ–°å¢å»£å‘Š
                    </button>
                    <button class="bot-btn" onclick="botAction('adStats')">
                        <i class="fas fa-chart-bar"></i> å»£å‘Šçµ±è¨ˆ
                    </button>
                    <button class="bot-btn" onclick="botAction('adSettings')">
                        <i class="fas fa-cog"></i> å»£å‘Šè¨­å®š
                    </button>
                    <button class="bot-btn" onclick="botAction('adRevenue')">
                        <i class="fas fa-dollar-sign"></i> æ”¶ç›Šå ±å‘Š
                    </button>
                </div>
            </div>
            
            <div class="bot-section">
                <h4>ğŸ”§ ç³»çµ±åŠŸèƒ½</h4>
                <div class="bot-buttons">
                    <button class="bot-btn" onclick="botAction('analytics')">
                        <i class="fas fa-analytics"></i> æ•¸æ“šåˆ†æ
                    </button>
                    <button class="bot-btn" onclick="botAction('userManage')">
                        <i class="fas fa-users"></i> ç”¨æˆ¶ç®¡ç†
                    </button>
                    <button class="bot-btn" onclick="botAction('backup')">
                        <i class="fas fa-database"></i> å‚™ä»½é‚„åŸ
                    </button>
                    <button class="bot-btn" onclick="botAction('apiKeys')">
                        <i class="fas fa-key"></i> API é‡‘é‘°
                    </button>
                </div>
            </div>
            
            <div class="bot-section">
                <h4>ğŸ¤– Bot è¨­å®š</h4>
                <div class="bot-buttons">
                    <button class="bot-btn" onclick="botAction('autoReply')">
                        <i class="fas fa-reply"></i> è‡ªå‹•å›è¦†
                    </button>
                    <button class="bot-btn" onclick="botAction('botSchedule')">
                        <i class="fas fa-calendar"></i> æ’ç¨‹ä»»å‹™
                    </button>
                    <button class="bot-btn" onclick="botAction('botLogs')">
                        <i class="fas fa-file-alt"></i> æ“ä½œæ—¥èªŒ
                    </button>
                    <button class="bot-btn" onclick="botAction('botSettings')">
                        <i class="fas fa-sliders-h"></i> Bot è¨­å®š
                    </button>
                </div>
            </div>
            
            <div class="bot-section">
                <h4>ğŸ“± Telegram Bot</h4>
                <div class="bot-buttons">
                    <button class="bot-btn" onclick="botAction('telegramConnect')">
                        <i class="fab fa-telegram"></i> é€£æ¥ Bot
                    </button>
                    <button class="bot-btn" onclick="botAction('telegramBroadcast')">
                        <i class="fas fa-broadcast-tower"></i> å»£æ’­è¨Šæ¯
                    </button>
                    <button class="bot-btn" onclick="botAction('telegramStats')">
                        <i class="fas fa-chart-line"></i> Bot çµ±è¨ˆ
                    </button>
                    <button class="bot-btn" onclick="botAction('telegramSettings')">
                        <i class="fas fa-cogs"></i> Bot è¨­å®š
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bot è§¸ç™¼æŒ‰éˆ• -->
    <button class="bot-trigger" onclick="toggleBotPanel()" title="é–‹å•Ÿç®¡ç†æ©Ÿå™¨äºº">
        <i class="fas fa-robot"></i>
    </button>
    
    <!-- å³éµé¸å–® -->
    <div class="context-menu" id="context-menu">
        <div class="context-menu-item" onclick="contextAction('cut')">
            <i class="fas fa-cut"></i>
            <span data-i18n="cut">å‰ªä¸‹</span>
        </div>
        <div class="context-menu-item" onclick="contextAction('copy')">
            <i class="fas fa-copy"></i>
            <span data-i18n="copy">è¤‡è£½</span>
        </div>
        <div class="context-menu-item" onclick="contextAction('paste')">
            <i class="fas fa-paste"></i>
            <span data-i18n="paste">è²¼ä¸Š</span>
        </div>
        <div class="context-menu-item" onclick="contextAction('delete')">
            <i class="fas fa-trash"></i>
            <span data-i18n="delete">åˆªé™¤</span>
        </div>
        <div class="context-menu-item" onclick="contextAction('bringToFront')">
            <i class="fas fa-layer-group"></i>
            <span data-i18n="bringToFront">ç§»åˆ°æœ€ä¸Šå±¤</span>
        </div>
        <div class="context-menu-item" onclick="contextAction('sendToBack')">
            <i class="fas fa-layer-group"></i>
            <span data-i18n="sendToBack">ç§»åˆ°æœ€ä¸‹å±¤</span>
        </div>
    </div>
    
    <!-- æ–‡å­—ç·¨è¼¯å™¨ -->
    <div class="text-editor" id="text-editor">
        <textarea id="text-editor-input"></textarea>
    </div>
    
    <!-- åœ–ç‰‡ä¸Šå‚³æ¨¡æ…‹æ¡† -->
    <div class="modal" id="image-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span data-i18n="uploadImage">ä¸Šå‚³åœ–ç‰‡</span>
            </div>
            <div class="modal-body">
                <div class="image-upload-area" onclick="document.getElementById('image-file-input').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p data-i18n="dragDropImage">æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡</p>
                    <input type="file" id="image-file-input" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('image-modal')" data-i18n="cancel">å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- å°ç« é¸æ“‡æ¨¡æ…‹æ¡† -->
    <div class="modal" id="stamp-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span data-i18n="selectStamp">é¸æ“‡å°ç« </span>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                    <div class="stamp-preview" onclick="addStamp('approved')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#4CAF50" stroke-width="3"/>
                            <text x="50" y="40" text-anchor="middle" fill="#4CAF50" font-size="16" font-weight="bold">APPROVED</text>
                            <text x="50" y="60" text-anchor="middle" fill="#4CAF50" font-size="12">å·²æ‰¹å‡†</text>
                        </svg>
                    </div>
                    <div class="stamp-preview" onclick="addStamp('rejected')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#F44336" stroke-width="3"/>
                            <text x="50" y="40" text-anchor="middle" fill="#F44336" font-size="16" font-weight="bold">REJECTED</text>
                            <text x="50" y="60" text-anchor="middle" fill="#F44336" font-size="12">å·²æ‹’çµ•</text>
                        </svg>
                    </div>
                    <div class="stamp-preview" onclick="addStamp('confidential')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <rect x="10" y="30" width="80" height="40" fill="none" stroke="#FF9800" stroke-width="3"/>
                            <text x="50" y="55" text-anchor="middle" fill="#FF9800" font-size="14" font-weight="bold">CONFIDENTIAL</text>
                        </svg>
                    </div>
                    <div class="stamp-preview" onclick="addStamp('copy')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <rect x="10" y="30" width="80" height="40" fill="none" stroke="#2196F3" stroke-width="3" transform="rotate(-15 50 50)"/>
                            <text x="50" y="55" text-anchor="middle" fill="#2196F3" font-size="18" font-weight="bold" transform="rotate(-15 50 50)">COPY</text>
                        </svg>
                    </div>
                    <div class="stamp-preview" onclick="addStamp('urgent')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <polygon points="50,10 90,80 10,80" fill="none" stroke="#F44336" stroke-width="3"/>
                            <text x="50" y="60" text-anchor="middle" fill="#F44336" font-size="16" font-weight="bold">URGENT</text>
                        </svg>
                    </div>
                    <div class="stamp-preview" onclick="addStamp('paid')">
                        <svg width="80" height="80" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#4CAF50" stroke-width="3"/>
                            <text x="50" y="40" text-anchor="middle" fill="#4CAF50" font-size="20" font-weight="bold">PAID</text>
                            <text x="50" y="60" text-anchor="middle" fill="#4CAF50" font-size="12">å·²ä»˜æ¬¾</text>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('stamp-modal')" data-i18n="cancel">å–æ¶ˆ</button>
            </div>
        </div>
    </div>
    
    <!-- ç°½åæ¨¡æ…‹æ¡† -->
    <div class="modal" id="signature-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span data-i18n="drawSignature">ç¹ªè£½ç°½å</span>
            </div>
            <div class="modal-body">
                <canvas id="signature-canvas" class="signature-pad" width="400" height="200"></canvas>
                <div class="signature-controls">
                    <button class="btn btn-secondary" onclick="clearSignature()" data-i18n="clear">æ¸…é™¤</button>
                    <input type="color" id="signature-color" value="#000000">
                    <input type="range" id="signature-width" min="1" max="10" value="2">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('signature-modal')" data-i18n="cancel">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveSignature()" data-i18n="save">å„²å­˜</button>
            </div>
        </div>
    </div>
    
    <!-- æ–°èç®¡ç†æ¨¡æ…‹æ¡† -->
    <div class="modal" id="news-management-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span id="news-modal-title">æ–°å¢æ–°è</span>
            </div>
            <div class="modal-body">
                <form class="news-form" id="news-form">
                    <input type="text" id="news-title" placeholder="æ–°èæ¨™é¡Œ" required>
                    <textarea id="news-content" placeholder="æ–°èå…§å®¹" required></textarea>
                    <input type="url" id="news-link" placeholder="é€£çµ (é¸å¡«)">
                    <input type="datetime-local" id="news-schedule" placeholder="æ’ç¨‹æ™‚é–“">
                    <select id="news-priority">
                        <option value="normal">ä¸€èˆ¬</option>
                        <option value="important">é‡è¦</option>
                        <option value="urgent">ç·Šæ€¥</option>
                    </select>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('news-management-modal')">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveNews()">å„²å­˜</button>
            </div>
        </div>
    </div>
    
    <!-- å»£å‘Šç®¡ç†æ¨¡æ…‹æ¡† -->
    <div class="modal" id="ad-management-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>å»£å‘Šç®¡ç†</span>
            </div>
            <div class="modal-body">
                <form class="news-form" id="ad-form">
                    <input type="text" id="ad-title" placeholder="å»£å‘Šæ¨™é¡Œ" required>
                    <textarea id="ad-description" placeholder="å»£å‘Šæè¿°" required></textarea>
                    <input type="url" id="ad-image" placeholder="åœ–ç‰‡ç¶²å€">
                    <input type="url" id="ad-link" placeholder="é»æ“Šé€£çµ" required>
                    <select id="ad-position">
                        <option value="top">é ‚éƒ¨æ©«å¹…</option>
                        <option value="bottom">åº•éƒ¨æ©«å¹…</option>
                        <option value="sidebar">å´é‚Šæ¬„</option>
                        <option value="popup">å½ˆå‡ºè¦–çª—</option>
                    </select>
                    <input type="number" id="ad-duration" placeholder="é¡¯ç¤ºæ™‚é•·(ç§’)" min="1" value="30">
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('ad-management-modal')">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveAd()">å„²å­˜</button>
            </div>
        </div>
    </div>
    
    <!-- å»£å‘Šæ©«å¹… -->
    <div class="ad-banner" id="ad-banner">
        <div class="ad-banner-content">
            <i class="fas fa-ad" style="font-size: 24px; color: var(--primary);"></i>
            <div>
                <strong id="ad-banner-title">é™æ™‚å„ªæƒ ï¼</strong>
                <span id="ad-banner-text">å‡ç´šåˆ°å°ˆæ¥­ç‰ˆäº«å—æ›´å¤šåŠŸèƒ½</span>
            </div>
        </div>
        <button class="ad-banner-close" onclick="closeAdBanner()">é—œé–‰</button>
    </div>

    <script>
        // PDF.js å…¨åŸŸè¨­å®š
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        // å¤šèªè¨€ç¿»è­¯ç³»çµ±
        const translations = {
            'zh-TW': {
                appName: 'PDF Master',
                openFile: 'é–‹å•Ÿæª”æ¡ˆ',
                save: 'å„²å­˜',
                export: 'åŒ¯å‡º',
                undo: 'å¾©åŸ',
                redo: 'é‡åš',
                cut: 'å‰ªä¸‹',
                copy: 'è¤‡è£½',
                paste: 'è²¼ä¸Š',
                addPage: 'æ–°å¢é é¢',
                deletePage: 'åˆªé™¤é é¢',
                reorderPages: 'é é¢é †åº',
                settings: 'è¨­å®š',
                pages: 'é é¢',
                uploadPDF: 'ä¸Šå‚³PDFæª”æ¡ˆ',
                dragDropFile: 'æ‹–æ”¾æª”æ¡ˆåˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ',
                selectFile: 'é¸æ“‡æª”æ¡ˆ',
                loading: 'æ­£åœ¨è¼‰å…¥PDF...',
                properties: 'å±¬æ€§',
                fillColor: 'å¡«å……é¡è‰²',
                strokeColor: 'é‚Šæ¡†é¡è‰²',
                strokeWidth: 'é‚Šæ¡†å¯¬åº¦',
                opacity: 'é€æ˜åº¦',
                fontSize: 'å­—é«”å¤§å°',
                fontFamily: 'å­—é«”',
                select: 'é¸æ“‡',
                text: 'æ–‡å­—',
                draw: 'ç¹ªåœ–',
                shape: 'å½¢ç‹€',
                image: 'åœ–ç‰‡',
                highlight: 'è¢å…‰ç­†',
                stamp: 'å°ç« ',
                signature: 'ç°½å',
                uploadImage: 'ä¸Šå‚³åœ–ç‰‡',
                dragDropImage: 'æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡',
                selectStamp: 'é¸æ“‡å°ç« ',
                drawSignature: 'ç¹ªè£½ç°½å',
                clear: 'æ¸…é™¤',
                cancel: 'å–æ¶ˆ',
                ok: 'ç¢ºå®š',
                delete: 'åˆªé™¤',
                bringToFront: 'ç§»åˆ°æœ€ä¸Šå±¤',
                sendToBack: 'ç§»åˆ°æœ€ä¸‹å±¤',
                ready: 'å°±ç·’',
                page: 'ç¬¬',
                pageOf: 'é '
            },
            'en': {
                appName: 'PDF Master',
                openFile: 'Open File',
                save: 'Save',
                export: 'Export',
                undo: 'Undo',
                redo: 'Redo',
                cut: 'Cut',
                copy: 'Copy',
                paste: 'Paste',
                addPage: 'Add Page',
                deletePage: 'Delete Page',
                reorderPages: 'Reorder Pages',
                settings: 'Settings',
                pages: 'Pages',
                uploadPDF: 'Upload PDF File',
                dragDropFile: 'Drag and drop file here or click to select',
                selectFile: 'Select File',
                loading: 'Loading PDF...',
                properties: 'Properties',
                fillColor: 'Fill Color',
                strokeColor: 'Stroke Color',
                strokeWidth: 'Stroke Width',
                opacity: 'Opacity',
                fontSize: 'Font Size',
                fontFamily: 'Font Family',
                select: 'Select',
                text: 'Text',
                draw: 'Draw',
                shape: 'Shape',
                image: 'Image',
                highlight: 'Highlight',
                stamp: 'Stamp',
                signature: 'Signature',
                uploadImage: 'Upload Image',
                dragDropImage: 'Drag and drop image here or click to select',
                selectStamp: 'Select Stamp',
                drawSignature: 'Draw Signature',
                clear: 'Clear',
                cancel: 'Cancel',
                ok: 'OK',
                delete: 'Delete',
                bringToFront: 'Bring to Front',
                sendToBack: 'Send to Back',
                ready: 'Ready',
                page: 'Page',
                pageOf: 'of'
            },
            'zh-CN': {
                appName: 'PDF Master',
                openFile: 'æ‰“å¼€æ–‡ä»¶',
                save: 'ä¿å­˜',
                export: 'å¯¼å‡º',
                undo: 'æ’¤é”€',
                redo: 'é‡åš',
                cut: 'å‰ªåˆ‡',
                copy: 'å¤åˆ¶',
                paste: 'ç²˜è´´',
                addPage: 'æ·»åŠ é¡µé¢',
                deletePage: 'åˆ é™¤é¡µé¢',
                reorderPages: 'é¡µé¢é¡ºåº',
                settings: 'è®¾ç½®',
                pages: 'é¡µé¢',
                uploadPDF: 'ä¸Šä¼ PDFæ–‡ä»¶',
                dragDropFile: 'æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶',
                selectFile: 'é€‰æ‹©æ–‡ä»¶',
                loading: 'æ­£åœ¨åŠ è½½PDF...',
                properties: 'å±æ€§',
                fillColor: 'å¡«å……é¢œè‰²',
                strokeColor: 'è¾¹æ¡†é¢œè‰²',
                strokeWidth: 'è¾¹æ¡†å®½åº¦',
                opacity: 'é€æ˜åº¦',
                fontSize: 'å­—ä½“å¤§å°',
                fontFamily: 'å­—ä½“',
                select: 'é€‰æ‹©',
                text: 'æ–‡å­—',
                draw: 'ç»˜å›¾',
                shape: 'å½¢çŠ¶',
                image: 'å›¾ç‰‡',
                highlight: 'è§å…‰ç¬”',
                stamp: 'å°ç« ',
                signature: 'ç­¾å',
                uploadImage: 'ä¸Šä¼ å›¾ç‰‡',
                dragDropImage: 'æ‹–æ”¾å›¾ç‰‡åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©',
                selectStamp: 'é€‰æ‹©å°ç« ',
                drawSignature: 'ç»˜åˆ¶ç­¾å',
                clear: 'æ¸…é™¤',
                cancel: 'å–æ¶ˆ',
                ok: 'ç¡®å®š',
                delete: 'åˆ é™¤',
                bringToFront: 'ç§»åˆ°æœ€ä¸Šå±‚',
                sendToBack: 'ç§»åˆ°æœ€ä¸‹å±‚',
                ready: 'å°±ç»ª',
                page: 'ç¬¬',
                pageOf: 'é¡µ'
            },
            'ja': {
                appName: 'PDF Master',
                openFile: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã',
                save: 'ä¿å­˜',
                export: 'ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
                undo: 'å…ƒã«æˆ»ã™',
                redo: 'ã‚„ã‚Šç›´ã—',
                cut: 'åˆ‡ã‚Šå–ã‚Š',
                copy: 'ã‚³ãƒ”ãƒ¼',
                paste: 'è²¼ã‚Šä»˜ã‘',
                addPage: 'ãƒšãƒ¼ã‚¸ã‚’è¿½åŠ ',
                deletePage: 'ãƒšãƒ¼ã‚¸ã‚’å‰Šé™¤',
                reorderPages: 'ãƒšãƒ¼ã‚¸ã®é †åº',
                settings: 'è¨­å®š',
                pages: 'ãƒšãƒ¼ã‚¸',
                uploadPDF: 'PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                dragDropFile: 'ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ',
                selectFile: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ',
                loading: 'PDFã‚’èª­ã¿è¾¼ã¿ä¸­...',
                properties: 'ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£',
                fillColor: 'å¡—ã‚Šã¤ã¶ã—è‰²',
                strokeColor: 'ç·šã®è‰²',
                strokeWidth: 'ç·šã®å¹…',
                opacity: 'ä¸é€æ˜åº¦',
                fontSize: 'ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º',
                fontFamily: 'ãƒ•ã‚©ãƒ³ãƒˆ',
                select: 'é¸æŠ',
                text: 'ãƒ†ã‚­ã‚¹ãƒˆ',
                draw: 'æç”»',
                shape: 'å›³å½¢',
                image: 'ç”»åƒ',
                highlight: 'è›å…‰ãƒšãƒ³',
                stamp: 'ã‚¹ã‚¿ãƒ³ãƒ—',
                signature: 'ç½²å',
                uploadImage: 'ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                dragDropImage: 'ã“ã“ã«ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ',
                selectStamp: 'ã‚¹ã‚¿ãƒ³ãƒ—ã‚’é¸æŠ',
                drawSignature: 'ç½²åã‚’æã',
                clear: 'ã‚¯ãƒªã‚¢',
                cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
                ok: 'OK',
                delete: 'å‰Šé™¤',
                bringToFront: 'æœ€å‰é¢ã¸',
                sendToBack: 'æœ€èƒŒé¢ã¸',
                ready: 'æº–å‚™å®Œäº†',
                page: 'ãƒšãƒ¼ã‚¸',
                pageOf: '/'
            },
            'ko': {
                appName: 'PDF Master',
                openFile: 'íŒŒì¼ ì—´ê¸°',
                save: 'ì €ì¥',
                export: 'ë‚´ë³´ë‚´ê¸°',
                undo: 'ì‹¤í–‰ ì·¨ì†Œ',
                redo: 'ë‹¤ì‹œ ì‹¤í–‰',
                cut: 'ì˜ë¼ë‚´ê¸°',
                copy: 'ë³µì‚¬',
                paste: 'ë¶™ì—¬ë„£ê¸°',
                addPage: 'í˜ì´ì§€ ì¶”ê°€',
                deletePage: 'í˜ì´ì§€ ì‚­ì œ',
                reorderPages: 'í˜ì´ì§€ ìˆœì„œ',
                settings: 'ì„¤ì •',
                pages: 'í˜ì´ì§€',
                uploadPDF: 'PDF íŒŒì¼ ì—…ë¡œë“œ',
                dragDropFile: 'ì—¬ê¸°ì— íŒŒì¼ì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ',
                selectFile: 'íŒŒì¼ ì„ íƒ',
                loading: 'PDF ë¡œë”© ì¤‘...',
                properties: 'ì†ì„±',
                fillColor: 'ì±„ìš°ê¸° ìƒ‰ìƒ',
                strokeColor: 'í…Œë‘ë¦¬ ìƒ‰ìƒ',
                strokeWidth: 'í…Œë‘ë¦¬ ë„ˆë¹„',
                opacity: 'ë¶ˆíˆ¬ëª…ë„',
                fontSize: 'ê¸€ê¼´ í¬ê¸°',
                fontFamily: 'ê¸€ê¼´',
                select: 'ì„ íƒ',
                text: 'í…ìŠ¤íŠ¸',
                draw: 'ê·¸ë¦¬ê¸°',
                shape: 'ë„í˜•',
                image: 'ì´ë¯¸ì§€',
                highlight: 'í˜•ê´‘íœ',
                stamp: 'ìŠ¤íƒ¬í”„',
                signature: 'ì„œëª…',
                uploadImage: 'ì´ë¯¸ì§€ ì—…ë¡œë“œ',
                dragDropImage: 'ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ',
                selectStamp: 'ìŠ¤íƒ¬í”„ ì„ íƒ',
                drawSignature: 'ì„œëª… ê·¸ë¦¬ê¸°',
                clear: 'ì§€ìš°ê¸°',
                cancel: 'ì·¨ì†Œ',
                ok: 'í™•ì¸',
                delete: 'ì‚­ì œ',
                bringToFront: 'ë§¨ ì•ìœ¼ë¡œ',
                sendToBack: 'ë§¨ ë’¤ë¡œ',
                ready: 'ì¤€ë¹„',
                page: 'í˜ì´ì§€',
                pageOf: '/'
            },
            'es': {
                appName: 'PDF Master',
                openFile: 'Abrir archivo',
                save: 'Guardar',
                export: 'Exportar',
                undo: 'Deshacer',
                redo: 'Rehacer',
                cut: 'Cortar',
                copy: 'Copiar',
                paste: 'Pegar',
                addPage: 'AÃ±adir pÃ¡gina',
                deletePage: 'Eliminar pÃ¡gina',
                reorderPages: 'Ordenar pÃ¡ginas',
                settings: 'ConfiguraciÃ³n',
                pages: 'PÃ¡ginas',
                uploadPDF: 'Subir archivo PDF',
                dragDropFile: 'Arrastra y suelta el archivo aquÃ­ o haz clic para seleccionar',
                selectFile: 'Seleccionar archivo',
                loading: 'Cargando PDF...',
                properties: 'Propiedades',
                fillColor: 'Color de relleno',
                strokeColor: 'Color del borde',
                strokeWidth: 'Ancho del borde',
                opacity: 'Opacidad',
                fontSize: 'TamaÃ±o de fuente',
                fontFamily: 'Fuente',
                select: 'Seleccionar',
                text: 'Texto',
                draw: 'Dibujar',
                shape: 'Forma',
                image: 'Imagen',
                highlight: 'Resaltador',
                stamp: 'Sello',
                signature: 'Firma',
                uploadImage: 'Subir imagen',
                dragDropImage: 'Arrastra y suelta la imagen aquÃ­ o haz clic para seleccionar',
                selectStamp: 'Seleccionar sello',
                drawSignature: 'Dibujar firma',
                clear: 'Limpiar',
                cancel: 'Cancelar',
                ok: 'Aceptar',
                delete: 'Eliminar',
                bringToFront: 'Traer al frente',
                sendToBack: 'Enviar atrÃ¡s',
                ready: 'Listo',
                page: 'PÃ¡gina',
                pageOf: 'de'
            },
            'fr': {
                appName: 'PDF Master',
                openFile: 'Ouvrir le fichier',
                save: 'Enregistrer',
                export: 'Exporter',
                undo: 'Annuler',
                redo: 'RÃ©tablir',
                cut: 'Couper',
                copy: 'Copier',
                paste: 'Coller',
                addPage: 'Ajouter une page',
                deletePage: 'Supprimer la page',
                reorderPages: 'Ordre des pages',
                settings: 'ParamÃ¨tres',
                pages: 'Pages',
                uploadPDF: 'TÃ©lÃ©charger un fichier PDF',
                dragDropFile: 'Glissez-dÃ©posez le fichier ici ou cliquez pour sÃ©lectionner',
                selectFile: 'SÃ©lectionner un fichier',
                loading: 'Chargement du PDF...',
                properties: 'PropriÃ©tÃ©s',
                fillColor: 'Couleur de remplissage',
                strokeColor: 'Couleur du contour',
                strokeWidth: 'Largeur du contour',
                opacity: 'OpacitÃ©',
                fontSize: 'Taille de police',
                fontFamily: 'Police',
                select: 'SÃ©lectionner',
                text: 'Texte',
                draw: 'Dessiner',
                shape: 'Forme',
                image: 'Image',
                highlight: 'Surligneur',
                stamp: 'Tampon',
                signature: 'Signature',
                uploadImage: 'TÃ©lÃ©charger une image',
                dragDropImage: 'Glissez-dÃ©posez l\'image ici ou cliquez pour sÃ©lectionner',
                selectStamp: 'SÃ©lectionner un tampon',
                drawSignature: 'Dessiner la signature',
                clear: 'Effacer',
                cancel: 'Annuler',
                ok: 'OK',
                delete: 'Supprimer',
                bringToFront: 'Mettre au premier plan',
                sendToBack: 'Mettre Ã  l\'arriÃ¨re-plan',
                ready: 'PrÃªt',
                page: 'Page',
                pageOf: 'sur'
            },
            'de': {
                appName: 'PDF Master',
                openFile: 'Datei Ã¶ffnen',
                save: 'Speichern',
                export: 'Exportieren',
                undo: 'RÃ¼ckgÃ¤ngig',
                redo: 'Wiederholen',
                cut: 'Ausschneiden',
                copy: 'Kopieren',
                paste: 'EinfÃ¼gen',
                addPage: 'Seite hinzufÃ¼gen',
                deletePage: 'Seite lÃ¶schen',
                reorderPages: 'Seitenreihenfolge',
                settings: 'Einstellungen',
                pages: 'Seiten',
                uploadPDF: 'PDF-Datei hochladen',
                dragDropFile: 'Datei hier ablegen oder klicken zum AuswÃ¤hlen',
                selectFile: 'Datei auswÃ¤hlen',
                loading: 'PDF wird geladen...',
                properties: 'Eigenschaften',
                fillColor: 'FÃ¼llfarbe',
                strokeColor: 'Rahmenfarbe',
                strokeWidth: 'Rahmenbreite',
                opacity: 'Deckkraft',
                fontSize: 'SchriftgrÃ¶ÃŸe',
                fontFamily: 'Schriftart',
                select: 'AuswÃ¤hlen',
                text: 'Text',
                draw: 'Zeichnen',
                shape: 'Form',
                image: 'Bild',
                highlight: 'Textmarker',
                stamp: 'Stempel',
                signature: 'Unterschrift',
                uploadImage: 'Bild hochladen',
                dragDropImage: 'Bild hier ablegen oder klicken zum AuswÃ¤hlen',
                selectStamp: 'Stempel auswÃ¤hlen',
                drawSignature: 'Unterschrift zeichnen',
                clear: 'LÃ¶schen',
                cancel: 'Abbrechen',
                ok: 'OK',
                delete: 'LÃ¶schen',
                bringToFront: 'In den Vordergrund',
                sendToBack: 'In den Hintergrund',
                ready: 'Bereit',
                page: 'Seite',
                pageOf: 'von'
            },
            'pt': {
                appName: 'PDF Master',
                openFile: 'Abrir arquivo',
                save: 'Salvar',
                export: 'Exportar',
                undo: 'Desfazer',
                redo: 'Refazer',
                cut: 'Recortar',
                copy: 'Copiar',
                paste: 'Colar',
                addPage: 'Adicionar pÃ¡gina',
                deletePage: 'Excluir pÃ¡gina',
                reorderPages: 'Ordem das pÃ¡ginas',
                settings: 'ConfiguraÃ§Ãµes',
                pages: 'PÃ¡ginas',
                uploadPDF: 'Carregar arquivo PDF',
                dragDropFile: 'Arraste e solte o arquivo aqui ou clique para selecionar',
                selectFile: 'Selecionar arquivo',
                loading: 'Carregando PDF...',
                properties: 'Propriedades',
                fillColor: 'Cor de preenchimento',
                strokeColor: 'Cor da borda',
                strokeWidth: 'Largura da borda',
                opacity: 'Opacidade',
                fontSize: 'Tamanho da fonte',
                fontFamily: 'Fonte',
                select: 'Selecionar',
                text: 'Texto',
                draw: 'Desenhar',
                shape: 'Forma',
                image: 'Imagem',
                highlight: 'Marcador',
                stamp: 'Carimbo',
                signature: 'Assinatura',
                uploadImage: 'Carregar imagem',
                dragDropImage: 'Arraste e solte a imagem aqui ou clique para selecionar',
                selectStamp: 'Selecionar carimbo',
                drawSignature: 'Desenhar assinatura',
                clear: 'Limpar',
                cancel: 'Cancelar',
                ok: 'OK',
                delete: 'Excluir',
                bringToFront: 'Trazer para frente',
                sendToBack: 'Enviar para trÃ¡s',
                ready: 'Pronto',
                page: 'PÃ¡gina',
                pageOf: 'de'
            },
            'ru': {
                appName: 'PDF Master',
                openFile: 'ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»',
                save: 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ',
                export: 'Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚',
                undo: 'ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ',
                redo: 'ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ',
                cut: 'Ğ’Ñ‹Ñ€ĞµĞ·Ğ°Ñ‚ÑŒ',
                copy: 'ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ',
                paste: 'Ğ’ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ',
                addPage: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ',
                deletePage: 'Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ',
                reorderPages: 'ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†',
                settings: 'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸',
                pages: 'Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹',
                uploadPDF: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ PDF Ñ„Ğ°Ğ¹Ğ»',
                dragDropFile: 'ĞŸĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» ÑÑĞ´Ğ° Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°',
                selectFile: 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»',
                loading: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° PDF...',
                properties: 'Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°',
                fillColor: 'Ğ¦Ğ²ĞµÑ‚ Ğ·Ğ°Ğ»Ğ¸Ğ²ĞºĞ¸',
                strokeColor: 'Ğ¦Ğ²ĞµÑ‚ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹',
                strokeWidth: 'Ğ¨Ğ¸Ñ€Ğ¸Ğ½Ğ° Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹',
                opacity: 'ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ',
                fontSize: 'Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ÑˆÑ€Ğ¸Ñ„Ñ‚Ğ°',
                fontFamily: 'Ğ¨Ñ€Ğ¸Ñ„Ñ‚',
                select: 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ',
                text: 'Ğ¢ĞµĞºÑÑ‚',
                draw: 'Ğ Ğ¸ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ',
                shape: 'Ğ¤Ğ¸Ğ³ÑƒÑ€Ğ°',
                image: 'Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ',
                highlight: 'ĞœĞ°Ñ€ĞºĞµÑ€',
                stamp: 'Ğ¨Ñ‚Ğ°Ğ¼Ğ¿',
                signature: 'ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑŒ',
                uploadImage: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ',
                dragDropImage: 'ĞŸĞµÑ€ĞµÑ‚Ğ°Ñ‰Ğ¸Ñ‚Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑÑĞ´Ğ° Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°',
                selectStamp: 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑˆÑ‚Ğ°Ğ¼Ğ¿',
                drawSignature: 'ĞĞ°Ñ€Ğ¸ÑĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ',
                clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ',
                cancel: 'ĞÑ‚Ğ¼ĞµĞ½Ğ°',
                ok: 'ĞĞš',
                delete: 'Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ',
                bringToFront: 'ĞĞ° Ğ¿ĞµÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ğ½',
                sendToBack: 'ĞĞ° Ğ·Ğ°Ğ´Ğ½Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ğ½',
                ready: 'Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾',
                page: 'Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°',
                pageOf: 'Ğ¸Ğ·'
            },
            'ar': {
                appName: 'PDF Master',
                openFile: 'ÙØªØ­ Ù…Ù„Ù',
                save: 'Ø­ÙØ¸',
                export: 'ØªØµØ¯ÙŠØ±',
                undo: 'ØªØ±Ø§Ø¬Ø¹',
                redo: 'Ø¥Ø¹Ø§Ø¯Ø©',
                cut: 'Ù‚Øµ',
                copy: 'Ù†Ø³Ø®',
                paste: 'Ù„ØµÙ‚',
                addPage: 'Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø©',
                deletePage: 'Ø­Ø°Ù ØµÙØ­Ø©',
                reorderPages: 'ØªØ±ØªÙŠØ¨ Ø§Ù„ØµÙØ­Ø§Øª',
                settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
                pages: 'Ø§Ù„ØµÙØ­Ø§Øª',
                uploadPDF: 'ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù PDF',
                dragDropFile: 'Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„Ù…Ù„Ù Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±',
                selectFile: 'Ø§Ø®ØªØ± Ù…Ù„Ù',
                loading: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ PDF...',
                properties: 'Ø§Ù„Ø®ØµØ§Ø¦Øµ',
                fillColor: 'Ù„ÙˆÙ† Ø§Ù„ØªØ¹Ø¨Ø¦Ø©',
                strokeColor: 'Ù„ÙˆÙ† Ø§Ù„Ø­Ø¯ÙˆØ¯',
                strokeWidth: 'Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¯ÙˆØ¯',
                opacity: 'Ø§Ù„Ø´ÙØ§ÙÙŠØ©',
                fontSize: 'Ø­Ø¬Ù… Ø§Ù„Ø®Ø·',
                fontFamily: 'Ø§Ù„Ø®Ø·',
                select: 'ØªØ­Ø¯ÙŠØ¯',
                text: 'Ù†Øµ',
                draw: 'Ø±Ø³Ù…',
                shape: 'Ø´ÙƒÙ„',
                image: 'ØµÙˆØ±Ø©',
                highlight: 'ØªÙ…ÙŠÙŠØ²',
                stamp: 'Ø®ØªÙ…',
                signature: 'ØªÙˆÙ‚ÙŠØ¹',
                uploadImage: 'ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©',
                dragDropImage: 'Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±',
                selectStamp: 'Ø§Ø®ØªØ± Ø®ØªÙ…',
                drawSignature: 'Ø±Ø³Ù… Ø§Ù„ØªÙˆÙ‚ÙŠØ¹',
                clear: 'Ù…Ø³Ø­',
                cancel: 'Ø¥Ù„ØºØ§Ø¡',
                ok: 'Ù…ÙˆØ§ÙÙ‚',
                delete: 'Ø­Ø°Ù',
                bringToFront: 'Ø¥Ø­Ø¶Ø§Ø± Ù„Ù„Ø£Ù…Ø§Ù…',
                sendToBack: 'Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø®Ù„Ù',
                ready: 'Ø¬Ø§Ù‡Ø²',
                page: 'ØµÙØ­Ø©',
                pageOf: 'Ù…Ù†'
            },
            'hi': { // å°åœ°èª
                appName: 'PDF Master',
                openFile: 'à¤«à¤¼à¤¾à¤‡à¤² à¤–à¥‹à¤²à¥‡à¤‚',
                save: 'à¤¸à¤¹à¥‡à¤œà¥‡à¤‚',
                export: 'à¤¨à¤¿à¤°à¥à¤¯à¤¾à¤¤',
                undo: 'à¤ªà¥‚à¤°à¥à¤µà¤µà¤¤ à¤•à¤°à¥‡à¤‚',
                redo: 'à¤«à¤¿à¤° à¤¸à¥‡ à¤•à¤°à¥‡à¤‚',
                cut: 'à¤•à¤¾à¤Ÿà¥‡à¤‚',
                copy: 'à¤•à¥‰à¤ªà¥€',
                paste: 'à¤ªà¥‡à¤¸à¥à¤Ÿ',
                addPage: 'à¤ªà¥ƒà¤·à¥à¤  à¤œà¥‹à¤¡à¤¼à¥‡à¤‚',
                deletePage: 'à¤ªà¥ƒà¤·à¥à¤  à¤¹à¤Ÿà¤¾à¤à¤‚',
                reorderPages: 'à¤ªà¥ƒà¤·à¥à¤  à¤•à¥à¤°à¤®',
                settings: 'à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸',
                pages: 'à¤ªà¥ƒà¤·à¥à¤ ',
                uploadPDF: 'PDF à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚',
                dragDropFile: 'à¤«à¤¼à¤¾à¤‡à¤² à¤¯à¤¹à¤¾à¤ à¤–à¥€à¤‚à¤šà¥‡à¤‚ à¤¯à¤¾ à¤šà¥à¤¨à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚',
                selectFile: 'à¤«à¤¼à¤¾à¤‡à¤² à¤šà¥à¤¨à¥‡à¤‚',
                loading: 'PDF à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',
                properties: 'à¤—à¥à¤£',
                fillColor: 'à¤­à¤°à¤¨à¥‡ à¤•à¤¾ à¤°à¤‚à¤—',
                strokeColor: 'à¤¬à¥‰à¤°à¥à¤¡à¤° à¤°à¤‚à¤—',
                strokeWidth: 'à¤¬à¥‰à¤°à¥à¤¡à¤° à¤šà¥Œà¤¡à¤¼à¤¾à¤ˆ',
                opacity: 'à¤ªà¤¾à¤°à¤¦à¤°à¥à¤¶à¤¿à¤¤à¤¾',
                fontSize: 'à¤«à¤¼à¥‰à¤¨à¥à¤Ÿ à¤†à¤•à¤¾à¤°',
                fontFamily: 'à¤«à¤¼à¥‰à¤¨à¥à¤Ÿ',
                select: 'à¤šà¥à¤¨à¥‡à¤‚',
                text: 'à¤Ÿà¥‡à¤•à¥à¤¸à¥à¤Ÿ',
                draw: 'à¤¡à¥à¤°à¥‰',
                shape: 'à¤†à¤•à¤¾à¤°',
                image: 'à¤›à¤µà¤¿',
                highlight: 'à¤¹à¤¾à¤‡à¤²à¤¾à¤‡à¤Ÿ',
                stamp: 'à¤¸à¥à¤Ÿà¥ˆà¤®à¥à¤ª',
                signature: 'à¤¹à¤¸à¥à¤¤à¤¾à¤•à¥à¤·à¤°',
                ready: 'à¤¤à¥ˆà¤¯à¤¾à¤°',
                page: 'à¤ªà¥ƒà¤·à¥à¤ ',
                pageOf: 'à¤•à¤¾'
            },
            'it': { // ç¾©å¤§åˆ©èª
                appName: 'PDF Master',
                openFile: 'Apri file',
                save: 'Salva',
                export: 'Esporta',
                undo: 'Annulla',
                redo: 'Ripeti',
                cut: 'Taglia',
                copy: 'Copia',
                paste: 'Incolla',
                addPage: 'Aggiungi pagina',
                deletePage: 'Elimina pagina',
                reorderPages: 'Riordina pagine',
                settings: 'Impostazioni',
                pages: 'Pagine',
                uploadPDF: 'Carica file PDF',
                dragDropFile: 'Trascina il file qui o clicca per selezionare',
                selectFile: 'Seleziona file',
                loading: 'Caricamento PDF...',
                properties: 'ProprietÃ ',
                fillColor: 'Colore di riempimento',
                strokeColor: 'Colore bordo',
                strokeWidth: 'Larghezza bordo',
                opacity: 'OpacitÃ ',
                fontSize: 'Dimensione carattere',
                fontFamily: 'Carattere',
                select: 'Seleziona',
                text: 'Testo',
                draw: 'Disegna',
                shape: 'Forma',
                image: 'Immagine',
                highlight: 'Evidenzia',
                stamp: 'Timbro',
                signature: 'Firma',
                ready: 'Pronto',
                page: 'Pagina',
                pageOf: 'di'
            },
            'nl': { // è·è˜­èª
                appName: 'PDF Master',
                openFile: 'Bestand openen',
                save: 'Opslaan',
                export: 'Exporteren',
                undo: 'Ongedaan maken',
                redo: 'Opnieuw',
                cut: 'Knippen',
                copy: 'KopiÃ«ren',
                paste: 'Plakken',
                addPage: 'Pagina toevoegen',
                deletePage: 'Pagina verwijderen',
                reorderPages: 'Pagina volgorde',
                settings: 'Instellingen',
                pages: 'Pagina\'s',
                uploadPDF: 'PDF uploaden',
                dragDropFile: 'Sleep bestand hier of klik om te selecteren',
                selectFile: 'Bestand selecteren',
                loading: 'PDF laden...',
                properties: 'Eigenschappen',
                fillColor: 'Vulkleur',
                strokeColor: 'Randkleur',
                strokeWidth: 'Randbreedte',
                opacity: 'Transparantie',
                fontSize: 'Lettergrootte',
                fontFamily: 'Lettertype',
                select: 'Selecteren',
                text: 'Tekst',
                draw: 'Tekenen',
                shape: 'Vorm',
                image: 'Afbeelding',
                highlight: 'Markeren',
                stamp: 'Stempel',
                signature: 'Handtekening',
                ready: 'Gereed',
                page: 'Pagina',
                pageOf: 'van'
            },
            'pl': { // æ³¢è˜­èª
                appName: 'PDF Master',
                openFile: 'OtwÃ³rz plik',
                save: 'Zapisz',
                export: 'Eksportuj',
                undo: 'Cofnij',
                redo: 'PonÃ³w',
                cut: 'Wytnij',
                copy: 'Kopiuj',
                paste: 'Wklej',
                addPage: 'Dodaj stronÄ™',
                deletePage: 'UsuÅ„ stronÄ™',
                reorderPages: 'KolejnoÅ›Ä‡ stron',
                settings: 'Ustawienia',
                pages: 'Strony',
                uploadPDF: 'PrzeÅ›lij plik PDF',
                dragDropFile: 'PrzeciÄ…gnij plik tutaj lub kliknij aby wybraÄ‡',
                selectFile: 'Wybierz plik',
                loading: 'Åadowanie PDF...',
                properties: 'WÅ‚aÅ›ciwoÅ›ci',
                fillColor: 'Kolor wypeÅ‚nienia',
                strokeColor: 'Kolor obramowania',
                strokeWidth: 'SzerokoÅ›Ä‡ obramowania',
                opacity: 'PrzezroczystoÅ›Ä‡',
                fontSize: 'Rozmiar czcionki',
                fontFamily: 'Czcionka',
                select: 'Wybierz',
                text: 'Tekst',
                draw: 'Rysuj',
                shape: 'KsztaÅ‚t',
                image: 'Obraz',
                highlight: 'Zaznacz',
                stamp: 'PieczÄ…tka',
                signature: 'Podpis',
                ready: 'Gotowe',
                page: 'Strona',
                pageOf: 'z'
            },
            'tr': { // åœŸè€³å…¶èª
                appName: 'PDF Master',
                openFile: 'Dosya AÃ§',
                save: 'Kaydet',
                export: 'DÄ±ÅŸa Aktar',
                undo: 'Geri Al',
                redo: 'Yinele',
                cut: 'Kes',
                copy: 'Kopyala',
                paste: 'YapÄ±ÅŸtÄ±r',
                addPage: 'Sayfa Ekle',
                deletePage: 'Sayfa Sil',
                reorderPages: 'Sayfa SÄ±rasÄ±',
                settings: 'Ayarlar',
                pages: 'Sayfalar',
                uploadPDF: 'PDF YÃ¼kle',
                dragDropFile: 'DosyayÄ± buraya sÃ¼rÃ¼kleyin veya seÃ§mek iÃ§in tÄ±klayÄ±n',
                selectFile: 'Dosya SeÃ§',
                loading: 'PDF yÃ¼kleniyor...',
                properties: 'Ã–zellikler',
                fillColor: 'Dolgu Rengi',
                strokeColor: 'KenarlÄ±k Rengi',
                strokeWidth: 'KenarlÄ±k GeniÅŸliÄŸi',
                opacity: 'ÅeffaflÄ±k',
                fontSize: 'YazÄ± Boyutu',
                fontFamily: 'YazÄ± Tipi',
                select: 'SeÃ§',
                text: 'Metin',
                draw: 'Ã‡iz',
                shape: 'Åekil',
                image: 'Resim',
                highlight: 'Vurgula',
                stamp: 'Damga',
                signature: 'Ä°mza',
                ready: 'HazÄ±r',
                page: 'Sayfa',
                pageOf: '/'
            },
            'vi': { // è¶Šå—èª
                appName: 'PDF Master',
                openFile: 'Má»Ÿ tá»‡p',
                save: 'LÆ°u',
                export: 'Xuáº¥t',
                undo: 'HoÃ n tÃ¡c',
                redo: 'LÃ m láº¡i',
                cut: 'Cáº¯t',
                copy: 'Sao chÃ©p',
                paste: 'DÃ¡n',
                addPage: 'ThÃªm trang',
                deletePage: 'XÃ³a trang',
                reorderPages: 'Sáº¯p xáº¿p trang',
                settings: 'CÃ i Ä‘áº·t',
                pages: 'Trang',
                uploadPDF: 'Táº£i lÃªn PDF',
                dragDropFile: 'KÃ©o tháº£ tá»‡p vÃ o Ä‘Ã¢y hoáº·c nháº¥p Ä‘á»ƒ chá»n',
                selectFile: 'Chá»n tá»‡p',
                loading: 'Äang táº£i PDF...',
                properties: 'Thuá»™c tÃ­nh',
                fillColor: 'MÃ u tÃ´',
                strokeColor: 'MÃ u viá»n',
                strokeWidth: 'Äá»™ rá»™ng viá»n',
                opacity: 'Äá»™ trong suá»‘t',
                fontSize: 'Cá»¡ chá»¯',
                fontFamily: 'PhÃ´ng chá»¯',
                select: 'Chá»n',
                text: 'VÄƒn báº£n',
                draw: 'Váº½',
                shape: 'HÃ¬nh dáº¡ng',
                image: 'HÃ¬nh áº£nh',
                highlight: 'ÄÃ¡nh dáº¥u',
                stamp: 'Con dáº¥u',
                signature: 'Chá»¯ kÃ½',
                ready: 'Sáºµn sÃ ng',
                page: 'Trang',
                pageOf: 'cá»§a'
            },
            'th': { // æ³°èª
                appName: 'PDF Master',
                openFile: 'à¹€à¸›à¸´à¸”à¹„à¸Ÿà¸¥à¹Œ',
                save: 'à¸šà¸±à¸™à¸—à¸¶à¸',
                export: 'à¸ªà¹ˆà¸‡à¸­à¸­à¸',
                undo: 'à¹€à¸¥à¸´à¸à¸—à¸³',
                redo: 'à¸—à¸³à¸‹à¹‰à¸³',
                cut: 'à¸•à¸±à¸”',
                copy: 'à¸„à¸±à¸”à¸¥à¸­à¸',
                paste: 'à¸§à¸²à¸‡',
                addPage: 'à¹€à¸à¸´à¹ˆà¸¡à¸«à¸™à¹‰à¸²',
                deletePage: 'à¸¥à¸šà¸«à¸™à¹‰à¸²',
                reorderPages: 'à¸ˆà¸±à¸”à¹€à¸£à¸µà¸¢à¸‡à¸«à¸™à¹‰à¸²',
                settings: 'à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²',
                pages: 'à¸«à¸™à¹‰à¸²',
                uploadPDF: 'à¸­à¸±à¸›à¹‚à¸«à¸¥à¸” PDF',
                dragDropFile: 'à¸¥à¸²à¸à¹„à¸Ÿà¸¥à¹Œà¸¡à¸²à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¸«à¸£à¸·à¸­à¸„à¸¥à¸´à¸à¹€à¸à¸·à¹ˆà¸­à¹€à¸¥à¸·à¸­à¸',
                selectFile: 'à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œ',
                loading: 'à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸” PDF...',
                properties: 'à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´',
                fillColor: 'à¸ªà¸µà¹€à¸•à¸´à¸¡',
                strokeColor: 'à¸ªà¸µà¸‚à¸­à¸š',
                strokeWidth: 'à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¸‚à¸­à¸š',
                opacity: 'à¸„à¸§à¸²à¸¡à¹‚à¸›à¸£à¹ˆà¸‡à¹ƒà¸ª',
                fontSize: 'à¸‚à¸™à¸²à¸”à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£',
                fontFamily: 'à¹à¸šà¸šà¸­à¸±à¸à¸©à¸£',
                select: 'à¹€à¸¥à¸·à¸­à¸',
                text: 'à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡',
                draw: 'à¸§à¸²à¸”',
                shape: 'à¸£à¸¹à¸›à¸£à¹ˆà¸²à¸‡',
                image: 'à¸£à¸¹à¸›à¸ à¸²à¸',
                highlight: 'à¹„à¸®à¹„à¸¥à¸•à¹Œ',
                stamp: 'à¸•à¸£à¸²à¸›à¸£à¸°à¸—à¸±à¸š',
                signature: 'à¸¥à¸²à¸¢à¹€à¸‹à¹‡à¸™',
                ready: 'à¸à¸£à¹‰à¸­à¸¡',
                page: 'à¸«à¸™à¹‰à¸²',
                pageOf: 'à¸ˆà¸²à¸'
            },
            'id': { // å°å°¼èª
                appName: 'PDF Master',
                openFile: 'Buka File',
                save: 'Simpan',
                export: 'Ekspor',
                undo: 'Batalkan',
                redo: 'Ulangi',
                cut: 'Potong',
                copy: 'Salin',
                paste: 'Tempel',
                addPage: 'Tambah Halaman',
                deletePage: 'Hapus Halaman',
                reorderPages: 'Urutan Halaman',
                settings: 'Pengaturan',
                pages: 'Halaman',
                uploadPDF: 'Unggah PDF',
                dragDropFile: 'Seret file ke sini atau klik untuk memilih',
                selectFile: 'Pilih File',
                loading: 'Memuat PDF...',
                properties: 'Properti',
                fillColor: 'Warna Isi',
                strokeColor: 'Warna Batas',
                strokeWidth: 'Lebar Batas',
                opacity: 'Transparansi',
                fontSize: 'Ukuran Font',
                fontFamily: 'Jenis Font',
                select: 'Pilih',
                text: 'Teks',
                draw: 'Gambar',
                shape: 'Bentuk',
                image: 'Gambar',
                highlight: 'Sorot',
                stamp: 'Stempel',
                signature: 'Tanda Tangan',
                ready: 'Siap',
                page: 'Halaman',
                pageOf: 'dari'
            },
            'sv': { // ç‘å…¸èª
                appName: 'PDF Master',
                openFile: 'Ã–ppna fil',
                save: 'Spara',
                export: 'Exportera',
                undo: 'Ã…ngra',
                redo: 'GÃ¶r om',
                cut: 'Klipp ut',
                copy: 'Kopiera',
                paste: 'Klistra in',
                addPage: 'LÃ¤gg till sida',
                deletePage: 'Ta bort sida',
                reorderPages: 'Sidordning',
                settings: 'InstÃ¤llningar',
                pages: 'Sidor',
                uploadPDF: 'Ladda upp PDF',
                dragDropFile: 'Dra filen hit eller klicka fÃ¶r att vÃ¤lja',
                selectFile: 'VÃ¤lj fil',
                loading: 'Laddar PDF...',
                properties: 'Egenskaper',
                fillColor: 'FyllnadsfÃ¤rg',
                strokeColor: 'KantfÃ¤rg',
                strokeWidth: 'Kantbredd',
                opacity: 'Genomskinlighet',
                fontSize: 'Teckenstorlek',
                fontFamily: 'Teckensnitt',
                select: 'VÃ¤lj',
                text: 'Text',
                draw: 'Rita',
                shape: 'Form',
                image: 'Bild',
                highlight: 'Markera',
                stamp: 'StÃ¤mpel',
                signature: 'Signatur',
                ready: 'Redo',
                page: 'Sida',
                pageOf: 'av'
            }
        };
        
        // æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹ç®¡ç†
        const AppState = {
            pdfDoc: null,
            currentPage: 1,
            totalPages: 0,
            scale: 1.0,
            canvas: null,
            fabricCanvas: null,
            currentTool: 'select',
            isDrawing: false,
            history: [],
            historyIndex: -1,
            clipboard: null,
            selectedObject: null,
            pages: {},
            modifications: {},
            currentLanguage: 'zh-TW',
            signatureCanvas: null,
            isSignatureDrawing: false,
            newsItems: [],
            currentNewsIndex: 0,
            adItems: [],
            botConfig: {
                apiEndpoint: 'https://api.pdfmaster.com/v1',
                apiKey: '',
                autoReplyEnabled: false
            }
        };
        
        // åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
        function initializeApp() {
            // æª¢æŸ¥ä¸¦è¨­ç½®èªè¨€
            const savedLang = localStorage.getItem('pdfMasterLanguage') || 'zh-TW';
            AppState.currentLanguage = savedLang;
            updateLanguage();
            
            // è¨­ç½®æ‹–æ”¾äº‹ä»¶
            setupDragAndDrop();
            
            // åˆå§‹åŒ– Fabric.js
            initializeFabricCanvas();
            
            // è¨­ç½®éµç›¤å¿«æ·éµ
            setupKeyboardShortcuts();
            
            // è¨­ç½®å³éµé¸å–®
            setupContextMenu();
            
            // åˆå§‹åŒ–ç°½åæ¿
            initializeSignaturePad();
            
            // é¡¯ç¤ºç‹€æ…‹è¨Šæ¯
            updateStatus(t('ready'));
        }
        
        // ç¿»è­¯å‡½æ•¸
        function t(key) {
            return translations[AppState.currentLanguage][key] || key;
        }
        
        // æ›´æ–°èªè¨€
        function updateLanguage() {
            document.documentElement.lang = AppState.currentLanguage;
            
            // æ›´æ–°æ‰€æœ‰å¸¶æœ‰ data-i18n å±¬æ€§çš„å…ƒç´ 
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                element.textContent = t(key);
            });
            
            // æ›´æ–°æ‰€æœ‰å¸¶æœ‰ data-tooltip å±¬æ€§çš„å…ƒç´ 
            document.querySelectorAll('[data-tooltip]').forEach(element => {
                const key = element.getAttribute('data-tooltip');
                element.setAttribute('data-tooltip', t(key));
            });
            
            // æ›´æ–°ç•¶å‰èªè¨€é¡¯ç¤º
            const langNames = {
                'zh-TW': 'ç¹é«”ä¸­æ–‡',
                'en': 'English',
                'zh-CN': 'ç®€ä½“ä¸­æ–‡',
                'ja': 'æ—¥æœ¬èª',
                'ko': 'í•œêµ­ì–´',
                'es': 'EspaÃ±ol',
                'fr': 'FranÃ§ais',
                'de': 'Deutsch',
                'pt': 'PortuguÃªs',
                'ru': 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
                'ar': 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
                'hi': 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
                'it': 'Italiano',
                'nl': 'Nederlands',
                'pl': 'Polski',
                'tr': 'TÃ¼rkÃ§e',
                'vi': 'Tiáº¿ng Viá»‡t',
                'th': 'à¹„à¸—à¸¢',
                'id': 'Bahasa Indonesia',
                'sv': 'Svenska'
            };
            document.getElementById('current-lang').textContent = langNames[AppState.currentLanguage];
            
            // å¦‚æœæ˜¯é˜¿æ‹‰ä¼¯èªï¼Œè¨­ç½®RTL
            if (AppState.currentLanguage === 'ar') {
                document.body.style.direction = 'rtl';
            } else {
                document.body.style.direction = 'ltr';
            }
        }
        
        // åˆ‡æ›èªè¨€é¸å–®
        function toggleLanguageMenu() {
            const menu = document.getElementById('language-menu');
            menu.classList.toggle('active');
        }
        
        // åˆ‡æ›èªè¨€
        function changeLanguage(lang) {
            AppState.currentLanguage = lang;
            localStorage.setItem('pdfMasterLanguage', lang);
            updateLanguage();
            toggleLanguageMenu();
            updateStatus(t('ready'));
        }
        
        // è¨­ç½®æ‹–æ”¾åŠŸèƒ½
        function setupDragAndDrop() {
            const uploadArea = document.getElementById('upload-area');
            const canvasWrapper = document.getElementById('canvas-wrapper');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                canvasWrapper.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                canvasWrapper.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                canvasWrapper.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight(e) {
                uploadArea.style.background = '#f0f8ff';
                uploadArea.style.borderColor = '#1a73e8';
            }
            
            function unhighlight(e) {
                uploadArea.style.background = '';
                uploadArea.style.borderColor = '';
            }
            
            canvasWrapper.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].type === 'application/pdf') {
                    handleFile(files[0]);
                }
            }
        }
        
        // è™•ç†æª”æ¡ˆé¸æ“‡
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/pdf') {
                handleFile(file);
            }
        }
        
        // è™•ç†PDFæª”æ¡ˆ
        async function handleFile(file) {
            const uploadArea = document.getElementById('upload-area');
            const loading = document.getElementById('loading');
            const canvasContainer = document.getElementById('pdf-canvas-container');
            
            uploadArea.style.display = 'none';
            loading.style.display = 'block';
            
            try {
                const arrayBuffer = await file.arrayBuffer();
                const loadingTask = pdfjsLib.getDocument(arrayBuffer);
                
                AppState.pdfDoc = await loadingTask.promise;
                AppState.totalPages = AppState.pdfDoc.numPages;
                AppState.currentPage = 1;
                
                // åˆå§‹åŒ–é é¢è³‡æ–™çµæ§‹
                for (let i = 1; i <= AppState.totalPages; i++) {
                    AppState.pages[i] = { objects: [] };
                    AppState.modifications[i] = [];
                }
                
                // è¼‰å…¥é é¢ç¸®åœ–
                await loadThumbnails();
                
                // æ¸²æŸ“ç¬¬ä¸€é 
                await renderPage(1);
                
                loading.style.display = 'none';
                canvasContainer.style.display = 'block';
                
                updateStatus(`å·²è¼‰å…¥ ${file.name} (å…± ${AppState.totalPages} é )`);
            } catch (error) {
                console.error('è¼‰å…¥PDFæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                loading.style.display = 'none';
                uploadArea.style.display = 'block';
                alert('è¼‰å…¥PDFæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¢ºèªæª”æ¡ˆæ ¼å¼æ­£ç¢ºã€‚');
            }
        }
        
        // è¼‰å…¥é é¢ç¸®åœ–
        async function loadThumbnails() {
            const pageList = document.getElementById('page-list');
            pageList.innerHTML = '';
            
            for (let i = 1; i <= AppState.totalPages; i++) {
                const page = await AppState.pdfDoc.getPage(i);
                const scale = 0.3;
                const viewport = page.getViewport({ scale });
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                const renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                
                await page.render(renderContext).promise;
                
                const pageItem = document.createElement('div');
                pageItem.className = 'page-item';
                pageItem.onclick = () => goToPage(i);
                if (i === 1) pageItem.classList.add('active');
                
                const img = document.createElement('img');
                img.className = 'page-thumbnail';
                img.src = canvas.toDataURL();
                
                const pageNumber = document.createElement('div');
                pageNumber.className = 'page-number';
                pageNumber.textContent = `ç¬¬ ${i} é `;
                
                pageItem.appendChild(img);
                pageItem.appendChild(pageNumber);
                pageList.appendChild(pageItem);
            }
        }
        
        // æ¸²æŸ“PDFé é¢
        async function renderPage(pageNum) {
            if (!AppState.pdfDoc) return;
            
            // å„²å­˜ç•¶å‰é é¢çš„ç·¨è¼¯å…§å®¹
            if (AppState.fabricCanvas) {
                saveCurrentPageState();
            }
            
            const page = await AppState.pdfDoc.getPage(pageNum);
            const viewport = page.getViewport({ scale: AppState.scale });
            
            const canvas = document.getElementById('pdf-canvas');
            const context = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            const renderContext = {
                canvasContext: context,
                viewport: viewport
            };
            
            await page.render(renderContext).promise;
            
            // æ›´æ–° Fabric canvas å°ºå¯¸
            if (AppState.fabricCanvas) {
                AppState.fabricCanvas.setWidth(viewport.width);
                AppState.fabricCanvas.setHeight(viewport.height);
                
                // è¼‰å…¥è©²é é¢çš„ç·¨è¼¯å…§å®¹
                loadPageState(pageNum);
            }
            
            // æ›´æ–°é é¢è³‡è¨Š
            document.getElementById('page-info').textContent = `${pageNum} / ${AppState.totalPages}`;
            
            // æ›´æ–°ç¸®åœ–é¸ä¸­ç‹€æ…‹
            updateThumbnailSelection(pageNum);
            
            AppState.currentPage = pageNum;
        }
        
        // åˆå§‹åŒ– Fabric.js Canvas
        function initializeFabricCanvas() {
            const fabricCanvas = new fabric.Canvas('fabric-canvas', {
                selection: true,
                preserveObjectStacking: true
            });
            
            AppState.fabricCanvas = fabricCanvas;
            
            // ç‰©ä»¶é¸ä¸­äº‹ä»¶
            fabricCanvas.on('selection:created', (e) => {
                AppState.selectedObject = e.selected[0];
                showPropertiesPanel();
                updatePropertyValues();
            });
            
            fabricCanvas.on('selection:updated', (e) => {
                AppState.selectedObject = e.selected[0];
                updatePropertyValues();
            });
            
            fabricCanvas.on('selection:cleared', () => {
                AppState.selectedObject = null;
                hidePropertiesPanel();
            });
            
            // ç‰©ä»¶ä¿®æ”¹äº‹ä»¶
            fabricCanvas.on('object:modified', () => {
                saveToHistory();
            });
            
            // æ»‘é¼ äº‹ä»¶è™•ç†
            fabricCanvas.on('mouse:down', handleMouseDown);
            fabricCanvas.on('mouse:move', handleMouseMove);
            fabricCanvas.on('mouse:up', handleMouseUp);
        }
        
        // å·¥å…·åˆ‡æ›
        function setTool(tool) {
            AppState.currentTool = tool;
            
            // æ›´æ–°å·¥å…·æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.floating-tool').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tool="${tool}"]`).classList.add('active');
            
            // è¨­ç½®æ¸¸æ¨™æ¨£å¼
            switch (tool) {
                case 'select':
                    AppState.fabricCanvas.defaultCursor = 'default';
                    AppState.fabricCanvas.isDrawingMode = false;
                    break;
                case 'text':
                    AppState.fabricCanvas.defaultCursor = 'text';
                    AppState.fabricCanvas.isDrawingMode = false;
                    break;
                case 'draw':
                    AppState.fabricCanvas.defaultCursor = 'crosshair';
                    AppState.fabricCanvas.isDrawingMode = true;
                    AppState.fabricCanvas.freeDrawingBrush.width = 2;
                    AppState.fabricCanvas.freeDrawingBrush.color = '#000000';
                    break;
                case 'shape':
                    AppState.fabricCanvas.defaultCursor = 'crosshair';
                    AppState.fabricCanvas.isDrawingMode = false;
                    break;
                case 'highlight':
                    AppState.fabricCanvas.defaultCursor = 'crosshair';
                    AppState.fabricCanvas.isDrawingMode = true;
                    AppState.fabricCanvas.freeDrawingBrush.width = 20;
                    AppState.fabricCanvas.freeDrawingBrush.color = 'rgba(255, 255, 0, 0.5)';
                    break;
                case 'image':
                    AppState.fabricCanvas.defaultCursor = 'default';
                    AppState.fabricCanvas.isDrawingMode = false;
                    showModal('image-modal');
                    break;
                case 'stamp':
                    AppState.fabricCanvas.defaultCursor = 'default';
                    AppState.fabricCanvas.isDrawingMode = false;
                    showModal('stamp-modal');
                    break;
                case 'signature':
                    AppState.fabricCanvas.defaultCursor = 'default';
                    AppState.fabricCanvas.isDrawingMode = false;
                    showModal('signature-modal');
                    break;
            }
            
            updateStatus(`${t('ready')} - ${t(tool)}`);
        }
        
        // æ»‘é¼ äº‹ä»¶è™•ç†
        function handleMouseDown(options) {
            if (AppState.currentTool === 'text' && !options.target) {
                const pointer = AppState.fabricCanvas.getPointer(options.e);
                showTextEditor(pointer.x, pointer.y);
            } else if (AppState.currentTool === 'shape' && !options.target) {
                const pointer = AppState.fabricCanvas.getPointer(options.e);
                startDrawingShape(pointer.x, pointer.y);
            }
        }
        
        function handleMouseMove(options) {
            if (AppState.isDrawing && AppState.currentTool === 'shape') {
                const pointer = AppState.fabricCanvas.getPointer(options.e);
                updateDrawingShape(pointer.x, pointer.y);
            }
        }
        
        function handleMouseUp(options) {
            if (AppState.isDrawing && AppState.currentTool === 'shape') {
                AppState.isDrawing = false;
                saveToHistory();
            }
        }
        
        // æ–‡å­—ç·¨è¼¯å™¨
        function showTextEditor(x, y) {
            const editor = document.getElementById('text-editor');
            const input = document.getElementById('text-editor-input');
            
            editor.style.left = x + 'px';
            editor.style.top = y + 'px';
            editor.style.display = 'block';
            
            input.value = '';
            input.focus();
            
            input.onblur = () => {
                if (input.value.trim()) {
                    const text = new fabric.IText(input.value, {
                        left: x,
                        top: y,
                        fontFamily: 'Arial',
                        fontSize: 16,
                        fill: '#000000'
                    });
                    AppState.fabricCanvas.add(text);
                    saveToHistory();
                }
                editor.style.display = 'none';
            };
            
            input.onkeydown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    input.blur();
                }
            };
        }
        
        // å½¢ç‹€ç¹ªè£½
        let drawingShape = null;
        let shapeStartX = 0;
        let shapeStartY = 0;
        
        function startDrawingShape(x, y) {
            AppState.isDrawing = true;
            shapeStartX = x;
            shapeStartY = y;
            
            // é è¨­ç¹ªè£½çŸ©å½¢
            drawingShape = new fabric.Rect({
                left: x,
                top: y,
                width: 0,
                height: 0,
                fill: 'transparent',
                stroke: '#000000',
                strokeWidth: 2
            });
            
            AppState.fabricCanvas.add(drawingShape);
        }
        
        function updateDrawingShape(x, y) {
            if (!drawingShape) return;
            
            const width = Math.abs(x - shapeStartX);
            const height = Math.abs(y - shapeStartY);
            const left = Math.min(x, shapeStartX);
            const top = Math.min(y, shapeStartY);
            
            drawingShape.set({
                left: left,
                top: top,
                width: width,
                height: height
            });
            
            AppState.fabricCanvas.renderAll();
        }
        
        // é é¢å°èˆª
        function previousPage() {
            if (AppState.currentPage > 1) {
                goToPage(AppState.currentPage - 1);
            }
        }
        
        function nextPage() {
            if (AppState.currentPage < AppState.totalPages) {
                goToPage(AppState.currentPage + 1);
            }
        }
        
        function goToPage(pageNum) {
            if (pageNum >= 1 && pageNum <= AppState.totalPages) {
                renderPage(pageNum);
            }
        }
        
        // ç¸®æ”¾æ§åˆ¶
        function zoomIn() {
            AppState.scale = Math.min(AppState.scale * 1.2, 3.0);
            renderPage(AppState.currentPage);
            updateZoomLevel();
        }
        
        function zoomOut() {
            AppState.scale = Math.max(AppState.scale / 1.2, 0.3);
            renderPage(AppState.currentPage);
            updateZoomLevel();
        }
        
        function fitToPage() {
            const wrapper = document.getElementById('canvas-wrapper');
            const wrapperWidth = wrapper.clientWidth - 40;
            const wrapperHeight = wrapper.clientHeight - 40;
            
            if (AppState.pdfDoc) {
                AppState.pdfDoc.getPage(AppState.currentPage).then(page => {
                    const viewport = page.getViewport({ scale: 1 });
                    const scaleX = wrapperWidth / viewport.width;
                    const scaleY = wrapperHeight / viewport.height;
                    AppState.scale = Math.min(scaleX, scaleY);
                    renderPage(AppState.currentPage);
                    updateZoomLevel();
                });
            }
        }
        
        function updateZoomLevel() {
            document.getElementById('zoom-level').textContent = Math.round(AppState.scale * 100) + '%';
        }
        
        // å±¬æ€§é¢æ¿
        function showPropertiesPanel() {
            document.getElementById('properties-panel').classList.add('active');
        }
        
        function hidePropertiesPanel() {
            document.getElementById('properties-panel').classList.remove('active');
        }
        
        function updatePropertyValues() {
            if (!AppState.selectedObject) return;
            
            const obj = AppState.selectedObject;
            
            // æ›´æ–°å±¬æ€§å€¼
            if (obj.fill) {
                document.getElementById('fill-color').value = obj.fill;
            }
            if (obj.stroke) {
                document.getElementById('stroke-color').value = obj.stroke;
            }
            if (obj.strokeWidth) {
                document.getElementById('stroke-width').value = obj.strokeWidth;
            }
            if (obj.opacity !== undefined) {
                document.getElementById('opacity').value = obj.opacity * 100;
            }
            if (obj.fontSize) {
                document.getElementById('font-size').value = obj.fontSize;
            }
            if (obj.fontFamily) {
                document.getElementById('font-family').value = obj.fontFamily;
            }
        }
        
        function updateObjectProperty(property) {
            if (!AppState.selectedObject) return;
            
            const value = document.getElementById(property.toLowerCase().replace(/([A-Z])/g, '-$1')).value;
            
            switch (property) {
                case 'fill':
                case 'stroke':
                    AppState.selectedObject.set(property, value);
                    break;
                case 'strokeWidth':
                case 'fontSize':
                    AppState.selectedObject.set(property, parseInt(value));
                    break;
                case 'opacity':
                    AppState.selectedObject.set('opacity', value / 100);
                    break;
                case 'fontFamily':
                    AppState.selectedObject.set('fontFamily', value);
                    break;
            }
            
            AppState.fabricCanvas.renderAll();
            saveToHistory();
        }
        
        // æ­·å²è¨˜éŒ„ç®¡ç†
        function saveToHistory() {
            const state = JSON.stringify(AppState.fabricCanvas.toJSON());
            AppState.history = AppState.history.slice(0, AppState.historyIndex + 1);
            AppState.history.push(state);
            AppState.historyIndex++;
            
            // é™åˆ¶æ­·å²è¨˜éŒ„æ•¸é‡
            if (AppState.history.length > 50) {
                AppState.history.shift();
                AppState.historyIndex--;
            }
        }
        
        function undo() {
            if (AppState.historyIndex > 0) {
                AppState.historyIndex--;
                const state = JSON.parse(AppState.history[AppState.historyIndex]);
                AppState.fabricCanvas.loadFromJSON(state, () => {
                    AppState.fabricCanvas.renderAll();
                });
                updateStatus('å·²å¾©åŸ');
            }
        }
        
        function redo() {
            if (AppState.historyIndex < AppState.history.length - 1) {
                AppState.historyIndex++;
                const state = JSON.parse(AppState.history[AppState.historyIndex]);
                AppState.fabricCanvas.loadFromJSON(state, () => {
                    AppState.fabricCanvas.renderAll();
                });
                updateStatus('å·²é‡åš');
            }
        }
        
        // å‰ªè²¼ç°¿æ“ä½œ
        function cut() {
            copy();
            deleteSelected();
        }
        
        function copy() {
            if (AppState.selectedObject) {
                AppState.clipboard = AppState.selectedObject.toObject();
                updateStatus('å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿');
            }
        }
        
        function paste() {
            if (AppState.clipboard) {
                fabric.util.enlivenObjects([AppState.clipboard], (objects) => {
                    objects.forEach((obj) => {
                        obj.set({
                            left: obj.left + 10,
                            top: obj.top + 10
                        });
                        AppState.fabricCanvas.add(obj);
                    });
                    AppState.fabricCanvas.renderAll();
                    saveToHistory();
                    updateStatus('å·²è²¼ä¸Š');
                });
            }
        }
        
        function deleteSelected() {
            const activeObjects = AppState.fabricCanvas.getActiveObjects();
            activeObjects.forEach(obj => {
                AppState.fabricCanvas.remove(obj);
            });
            AppState.fabricCanvas.discardActiveObject();
            AppState.fabricCanvas.renderAll();
            saveToHistory();
            updateStatus('å·²åˆªé™¤é¸ä¸­ç‰©ä»¶');
        }
        
        // é é¢ç‹€æ…‹ç®¡ç†
        function saveCurrentPageState() {
            if (AppState.currentPage && AppState.fabricCanvas) {
                AppState.pages[AppState.currentPage].objects = AppState.fabricCanvas.toJSON().objects;
            }
        }
        
        function loadPageState(pageNum) {
            AppState.fabricCanvas.clear();
            
            if (AppState.pages[pageNum] && AppState.pages[pageNum].objects.length > 0) {
                fabric.util.enlivenObjects(AppState.pages[pageNum].objects, (objects) => {
                    objects.forEach(obj => {
                        AppState.fabricCanvas.add(obj);
                    });
                    AppState.fabricCanvas.renderAll();
                });
            }
        }
        
        // åŒ¯å‡ºPDF - å®Œæ•´å¯¦ç¾
        async function exportPDF() {
            if (!AppState.pdfDoc) {
                alert('è«‹å…ˆè¼‰å…¥ PDF æª”æ¡ˆ');
                return;
            }
            
            updateStatus('æ­£åœ¨æº–å‚™åŒ¯å‡ºPDF...');
            
            try {
                // å„²å­˜ç•¶å‰é é¢ç‹€æ…‹
                saveCurrentPageState();
                
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();
                let firstPage = true;
                
                for (let i = 1; i <= AppState.totalPages; i++) {
                    // æ¸²æŸ“åŸå§‹PDFé é¢
                    const page = await AppState.pdfDoc.getPage(i);
                    const viewport = page.getViewport({ scale: 2 });
                    
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.width = viewport.width;
                    canvas.height = viewport.height;
                    
                    // è€ƒæ…®é é¢æ—‹è½‰
                    const rotation = AppState.pageRotations && AppState.pageRotations[i] || 0;
                    if (rotation !== 0) {
                        context.save();
                        context.translate(canvas.width / 2, canvas.height / 2);
                        context.rotate(rotation * Math.PI / 180);
                        context.translate(-canvas.width / 2, -canvas.height / 2);
                    }
                    
                    await page.render({
                        canvasContext: context,
                        viewport: viewport
                    }).promise;
                    
                    if (rotation !== 0) {
                        context.restore();
                    }
                    
                    // å¦‚æœæœ‰ç·¨è¼¯å…§å®¹ï¼Œå‰µå»ºè‡¨æ™‚ canvas ä¾†åˆä½µ
                    if (AppState.pages[i] && AppState.pages[i].objects && AppState.pages[i].objects.length > 0) {
                        const tempCanvas = new fabric.Canvas(null, {
                            width: viewport.width,
                            height: viewport.height
                        });
                        
                        // è¼‰å…¥è©²é çš„ç·¨è¼¯å…§å®¹
                        await new Promise((resolve) => {
                            fabric.util.enlivenObjects(AppState.pages[i].objects, (objects) => {
                                objects.forEach(obj => {
                                    // èª¿æ•´ç‰©ä»¶æ¯”ä¾‹
                                    obj.scaleX = (obj.scaleX || 1) * (viewport.width / AppState.fabricCanvas.width);
                                    obj.scaleY = (obj.scaleY || 1) * (viewport.height / AppState.fabricCanvas.height);
                                    obj.left = obj.left * (viewport.width / AppState.fabricCanvas.width);
                                    obj.top = obj.top * (viewport.height / AppState.fabricCanvas.height);
                                    tempCanvas.add(obj);
                                });
                                tempCanvas.renderAll();
                                resolve();
                            });
                        });
                        
                        // å°‡ç·¨è¼¯å…§å®¹ç¹ªè£½åˆ°ä¸» canvas ä¸Š
                        context.drawImage(tempCanvas.getElement(), 0, 0);
                    }
                    
                    // æ·»åŠ åˆ° PDF
                    const imgData = canvas.toDataURL('image/jpeg', 1.0);
                    
                    if (firstPage) {
                        firstPage = false;
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        const pdfHeight = pdf.internal.pageSize.getHeight();
                        const scale = Math.min(pdfWidth / viewport.width, pdfHeight / viewport.height);
                        const scaledWidth = viewport.width * scale;
                        const scaledHeight = viewport.height * scale;
                        const x = (pdfWidth - scaledWidth) / 2;
                        const y = (pdfHeight - scaledHeight) / 2;
                        pdf.addImage(imgData, 'JPEG', x, y, scaledWidth, scaledHeight);
                    } else {
                        pdf.addPage();
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        const pdfHeight = pdf.internal.pageSize.getHeight();
                        const scale = Math.min(pdfWidth / viewport.width, pdfHeight / viewport.height);
                        const scaledWidth = viewport.width * scale;
                        const scaledHeight = viewport.height * scale;
                        const x = (pdfWidth - scaledWidth) / 2;
                        const y = (pdfHeight - scaledHeight) / 2;
                        pdf.addImage(imgData, 'JPEG', x, y, scaledWidth, scaledHeight);
                    }
                    
                    updateStatus(`æ­£åœ¨è™•ç†ç¬¬ ${i}/${AppState.totalPages} é ...`);
                }
                
                // å„²å­˜ PDF
                const fileName = AppState.fileName ? AppState.fileName.replace('.pdf', '_edited.pdf') : 'edited_document.pdf';
                pdf.save(fileName);
                updateStatus('PDF åŒ¯å‡ºå®Œæˆ');
                
            } catch (error) {
                console.error('åŒ¯å‡º PDF æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                alert('åŒ¯å‡º PDF æ™‚ç™¼ç”ŸéŒ¯èª¤: ' + error.message);
                updateStatus('åŒ¯å‡ºå¤±æ•—');
            }
        }
        
        // åˆ†å‰² PDF åŠŸèƒ½
        function splitPDF() {
            if (!AppState.pdfDoc) {
                alert('è«‹å…ˆè¼‰å…¥ PDF æª”æ¡ˆ');
                return;
            }
            
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <span>åˆ†å‰² PDF</span>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <p>é¸æ“‡åˆ†å‰²æ–¹å¼ï¼š</p>
                        <div style="margin: 10px 0;">
                            <label>
                                <input type="radio" name="split-type" value="single" checked>
                                æ¯é åˆ†å‰²ç‚ºå–®ç¨æª”æ¡ˆ
                            </label>
                        </div>
                        <div style="margin: 10px 0;">
                            <label>
                                <input type="radio" name="split-type" value="range">
                                æŒ‰é é¢ç¯„åœåˆ†å‰²
                            </label>
                            <div id="range-options" style="display: none; margin-top: 10px;">
                                <input type="text" id="page-ranges" placeholder="ä¾‹å¦‚: 1-3,5,7-9" style="width: 200px;">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">å–æ¶ˆ</button>
                        <button class="btn btn-primary" onclick="performSplit()">åˆ†å‰²</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // åˆ‡æ›é¸é …é¡¯ç¤º
            modal.querySelectorAll('input[name="split-type"]').forEach(radio => {
                radio.onchange = () => {
                    document.getElementById('range-options').style.display = 
                        radio.value === 'range' ? 'block' : 'none';
                };
            });
        }
        
        async function performSplit() {
            const splitType = document.querySelector('input[name="split-type"]:checked').value;
            updateStatus('æ­£åœ¨åˆ†å‰² PDF...');
            
            try {
                const { jsPDF } = window.jspdf;
                
                if (splitType === 'single') {
                    // æ¯é åˆ†å‰²
                    for (let i = 1; i <= AppState.totalPages; i++) {
                        const pdf = new jsPDF();
                        const page = await AppState.pdfDoc.getPage(i);
                        const viewport = page.getViewport({ scale: 2 });
                        
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.width = viewport.width;
                        canvas.height = viewport.height;
                        
                        await page.render({
                            canvasContext: context,
                            viewport: viewport
                        }).promise;
                        
                        const imgData = canvas.toDataURL('image/jpeg', 1.0);
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        const pdfHeight = pdf.internal.pageSize.getHeight();
                        pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
                        
                        pdf.save(`page_${i}.pdf`);
                    }
                } else {
                    // æŒ‰ç¯„åœåˆ†å‰²
                    const ranges = parsePageRanges(document.getElementById('page-ranges').value);
                    
                    for (let rangeIndex = 0; rangeIndex < ranges.length; rangeIndex++) {
                        const range = ranges[rangeIndex];
                        const pdf = new jsPDF();
                        let firstPage = true;
                        
                        for (const pageNum of range) {
                            if (pageNum > 0 && pageNum <= AppState.totalPages) {
                                if (!firstPage) {
                                    pdf.addPage();
                                }
                                firstPage = false;
                                
                                const page = await AppState.pdfDoc.getPage(pageNum);
                                const viewport = page.getViewport({ scale: 2 });
                                
                                const canvas = document.createElement('canvas');
                                const context = canvas.getContext('2d');
                                canvas.width = viewport.width;
                                canvas.height = viewport.height;
                                
                                await page.render({
                                    canvasContext: context,
                                    viewport: viewport
                                }).promise;
                                
                                const imgData = canvas.toDataURL('image/jpeg', 1.0);
                                const pdfWidth = pdf.internal.pageSize.getWidth();
                                const pdfHeight = pdf.internal.pageSize.getHeight();
                                pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
                            }
                        }
                        
                        pdf.save(`split_${rangeIndex + 1}.pdf`);
                    }
                }
                
                document.querySelector('.modal.active').remove();
                updateStatus('PDF åˆ†å‰²å®Œæˆ');
                
            } catch (error) {
                console.error('åˆ†å‰² PDF æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                alert('åˆ†å‰² PDF æ™‚ç™¼ç”ŸéŒ¯èª¤');
                updateStatus('åˆ†å‰²å¤±æ•—');
            }
        }
        
        function parsePageRanges(input) {
            const ranges = [];
            const parts = input.split(',');
            
            for (const part of parts) {
                const trimmed = part.trim();
                if (trimmed.includes('-')) {
                    const [start, end] = trimmed.split('-').map(n => parseInt(n));
                    const range = [];
                    for (let i = start; i <= end; i++) {
                        range.push(i);
                    }
                    ranges.push(range);
                } else {
                    ranges.push([parseInt(trimmed)]);
                }
            }
            
            return ranges;
        }
        
        // æ·»åŠ æ°´å°åŠŸèƒ½
        function addWatermark() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <span>æ·»åŠ æ°´å°</span>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 10px;">
                            <label>æ°´å°æ–‡å­—ï¼š</label>
                            <input type="text" id="watermark-text" value="æ©Ÿå¯†æ–‡ä»¶" style="width: 200px;">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>å­—é«”å¤§å°ï¼š</label>
                            <input type="number" id="watermark-size" value="48" min="12" max="200" style="width: 80px;">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>é€æ˜åº¦ï¼š</label>
                            <input type="range" id="watermark-opacity" min="0" max="100" value="20" style="width: 200px;">
                            <span id="opacity-value">20%</span>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>é¡è‰²ï¼š</label>
                            <input type="color" id="watermark-color" value="#cccccc">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>è§’åº¦ï¼š</label>
                            <input type="range" id="watermark-angle" min="-90" max="90" value="-45" style="width: 200px;">
                            <span id="angle-value">-45Â°</span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">å–æ¶ˆ</button>
                        <button class="btn btn-primary" onclick="applyWatermark()">æ‡‰ç”¨åˆ°æ‰€æœ‰é é¢</button>
                        <button class="btn btn-primary" onclick="applyWatermark(true)">åƒ…æ‡‰ç”¨åˆ°ç•¶å‰é </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // æ›´æ–°é¡¯ç¤ºå€¼
            document.getElementById('watermark-opacity').oninput = function() {
                document.getElementById('opacity-value').textContent = this.value + '%';
            };
            document.getElementById('watermark-angle').oninput = function() {
                document.getElementById('angle-value').textContent = this.value + 'Â°';
            };
        }
        
        function applyWatermark(currentPageOnly = false) {
            const text = document.getElementById('watermark-text').value;
            const size = parseInt(document.getElementById('watermark-size').value);
            const opacity = parseInt(document.getElementById('watermark-opacity').value) / 100;
            const color = document.getElementById('watermark-color').value;
            const angle = parseInt(document.getElementById('watermark-angle').value);
            
            if (!text) {
                alert('è«‹è¼¸å…¥æ°´å°æ–‡å­—');
                return;
            }
            
            const watermark = new fabric.Text(text, {
                fontSize: size,
                fill: color,
                opacity: opacity,
                angle: angle,
                originX: 'center',
                originY: 'center',
                left: AppState.fabricCanvas.width / 2,
                top: AppState.fabricCanvas.height / 2,
                selectable: false,
                evented: false
            });
            
            if (currentPageOnly) {
                AppState.fabricCanvas.add(watermark);
                watermark.sendToBack();
                saveToHistory();
                updateStatus('å·²æ·»åŠ æ°´å°åˆ°ç•¶å‰é ');
            } else {
                // æ·»åŠ åˆ°æ‰€æœ‰é é¢
                for (let i = 1; i <= AppState.totalPages; i++) {
                    if (!AppState.pages[i]) {
                        AppState.pages[i] = { objects: [] };
                    }
                    AppState.pages[i].watermark = watermark.toObject();
                }
                
                // å¦‚æœæ˜¯ç•¶å‰é ï¼Œç«‹å³é¡¯ç¤º
                if (AppState.currentPage) {
                    AppState.fabricCanvas.add(watermark);
                    watermark.sendToBack();
                }
                
                updateStatus('å·²æ·»åŠ æ°´å°åˆ°æ‰€æœ‰é é¢');
            }
            
            document.querySelector('.modal.active').remove();
        }
        
        // æ—‹è½‰é é¢åŠŸèƒ½
        function rotatePage(degrees) {
            if (!AppState.currentPage) return;
            
            // åˆå§‹åŒ–æ—‹è½‰è¨˜éŒ„
            if (!AppState.pageRotations) {
                AppState.pageRotations = {};
            }
            
            // æ›´æ–°æ—‹è½‰è§’åº¦
            const currentRotation = AppState.pageRotations[AppState.currentPage] || 0;
            AppState.pageRotations[AppState.currentPage] = (currentRotation + degrees) % 360;
            
            // é‡æ–°æ¸²æŸ“é é¢
            renderPage(AppState.currentPage);
            updateStatus(`é é¢å·²æ—‹è½‰ ${degrees} åº¦`);
        }
        
        // è¨­å®šåŠŸèƒ½
        function showSettings() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <span>è¨­å®š</span>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <div class="setting-group">
                            <h3>é¡¯ç¤ºè¨­å®š</h3>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="show-grid" ${AppState.showGrid ? 'checked' : ''}>
                                    é¡¯ç¤ºç¶²æ ¼
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="show-rulers" ${AppState.showRulers ? 'checked' : ''}>
                                    é¡¯ç¤ºå°ºè¦
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="auto-save" ${AppState.autoSave ? 'checked' : ''}>
                                    è‡ªå‹•å„²å­˜ç·¨è¼¯
                                </label>
                            </div>
                        </div>
                        
                        <div class="setting-group">
                            <h3>é è¨­å€¼</h3>
                            <div class="setting-item">
                                <label>é è¨­å­—é«”å¤§å°ï¼š</label>
                                <input type="number" id="default-font-size" value="${AppState.defaultFontSize || 16}" min="8" max="72" style="width: 60px;">
                            </div>
                            <div class="setting-item">
                                <label>é è¨­ç·šæ¢å¯¬åº¦ï¼š</label>
                                <input type="number" id="default-stroke-width" value="${AppState.defaultStrokeWidth || 2}" min="1" max="20" style="width: 60px;">
                            </div>
                            <div class="setting-item">
                                <label>é è¨­é¡è‰²ï¼š</label>
                                <input type="color" id="default-color" value="${AppState.defaultColor || '#000000'}">
                            </div>
                        </div>
                        
                        <div class="setting-group">
                            <h3>æ•ˆèƒ½è¨­å®š</h3>
                            <div class="setting-item">
                                <label>æ¸²æŸ“å“è³ªï¼š</label>
                                <select id="render-quality">
                                    <option value="low" ${AppState.renderQuality === 'low' ? 'selected' : ''}>ä½</option>
                                    <option value="medium" ${AppState.renderQuality === 'medium' ? 'selected' : ''}>ä¸­</option>
                                    <option value="high" ${AppState.renderQuality === 'high' ? 'selected' : ''}>é«˜</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>æœ€å¤§æ­·å²è¨˜éŒ„æ•¸ï¼š</label>
                                <input type="number" id="max-history" value="${AppState.maxHistory || 50}" min="10" max="200" style="width: 60px;">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">å–æ¶ˆ</button>
                        <button class="btn btn-primary" onclick="saveSettings()">å„²å­˜è¨­å®š</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // æ·»åŠ æ¨£å¼
            const style = document.createElement('style');
            style.textContent = `
                .setting-group {
                    margin-bottom: 20px;
                    padding-bottom: 20px;
                    border-bottom: 1px solid #e0e0e0;
                }
                .setting-group:last-child {
                    border-bottom: none;
                }
                .setting-group h3 {
                    margin-bottom: 15px;
                    color: #333;
                    font-size: 16px;
                }
                .setting-item {
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }
                .setting-item label {
                    flex: 1;
                }
            `;
            modal.appendChild(style);
        }
        
        // å„²å­˜è¨­å®š
        function saveSettings() {
            AppState.showGrid = document.getElementById('show-grid').checked;
            AppState.showRulers = document.getElementById('show-rulers').checked;
            AppState.autoSave = document.getElementById('auto-save').checked;
            AppState.defaultFontSize = parseInt(document.getElementById('default-font-size').value);
            AppState.defaultStrokeWidth = parseInt(document.getElementById('default-stroke-width').value);
            AppState.defaultColor = document.getElementById('default-color').value;
            AppState.renderQuality = document.getElementById('render-quality').value;
            AppState.maxHistory = parseInt(document.getElementById('max-history').value);
            
            // å„²å­˜åˆ° localStorage
            localStorage.setItem('pdfMasterSettings', JSON.stringify({
                showGrid: AppState.showGrid,
                showRulers: AppState.showRulers,
                autoSave: AppState.autoSave,
                defaultFontSize: AppState.defaultFontSize,
                defaultStrokeWidth: AppState.defaultStrokeWidth,
                defaultColor: AppState.defaultColor,
                renderQuality: AppState.renderQuality,
                maxHistory: AppState.maxHistory
            }));
            
            // æ‡‰ç”¨è¨­å®š
            applySettings();
            
            document.querySelector('.modal.active').remove();
            updateStatus('è¨­å®šå·²å„²å­˜');
        }
        
        // æ‡‰ç”¨è¨­å®š
        function applySettings() {
            // æ›´æ–°æ¸²æŸ“å“è³ª
            if (AppState.renderQuality && AppState.pdfDoc) {
                const qualityScale = {
                    'low': 1,
                    'medium': 1.5,
                    'high': 2
                };
                AppState.renderScale = qualityScale[AppState.renderQuality] || 1.5;
                renderPage(AppState.currentPage);
            }
            
            // æ›´æ–°æ­·å²è¨˜éŒ„é™åˆ¶
            if (AppState.history && AppState.history.length > AppState.maxHistory) {
                AppState.history = AppState.history.slice(-AppState.maxHistory);
                AppState.historyIndex = AppState.history.length - 1;
            }
        }
        
        // è¼‰å…¥è¨­å®š
        function loadSettings() {
            const savedSettings = localStorage.getItem('pdfMasterSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                Object.assign(AppState, settings);
            }
        }
        
        // åˆ—å° PDF
        function printPDF() {
            if (!AppState.pdfDoc) {
                alert('è«‹å…ˆè¼‰å…¥ PDF æª”æ¡ˆ');
                return;
            }
            
            updateStatus('æ­£åœ¨æº–å‚™åˆ—å°...');
            
            // å‰µå»ºåˆ—å°ç”¨çš„ iframe
            const printFrame = document.createElement('iframe');
            printFrame.style.position = 'fixed';
            printFrame.style.right = '0';
            printFrame.style.bottom = '0';
            printFrame.style.width = '0';
            printFrame.style.height = '0';
            printFrame.style.border = '0';
            document.body.appendChild(printFrame);
            
            const printDocument = printFrame.contentWindow.document;
            printDocument.open();
            printDocument.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>åˆ—å° PDF</title>
                    <style>
                        @media print {
                            body { margin: 0; }
                            .page { page-break-after: always; }
                            .page:last-child { page-break-after: auto; }
                            img { max-width: 100%; height: auto; }
                        }
                    </style>
                </head>
                <body></body>
                </html>
            `);
            printDocument.close();
            
            // æ¸²æŸ“æ‰€æœ‰é é¢
            const renderPromises = [];
            for (let i = 1; i <= AppState.totalPages; i++) {
                renderPromises.push(renderPageForPrint(i, printDocument.body));
            }
            
            Promise.all(renderPromises).then(() => {
                updateStatus('æ­£åœ¨é–‹å•Ÿåˆ—å°å°è©±æ¡†...');
                printFrame.contentWindow.focus();
                printFrame.contentWindow.print();
                
                // åˆ—å°å®Œæˆå¾Œç§»é™¤ iframe
                setTimeout(() => {
                    document.body.removeChild(printFrame);
                    updateStatus('åˆ—å°æº–å‚™å®Œæˆ');
                }, 1000);
            }).catch(error => {
                console.error('æº–å‚™åˆ—å°æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                alert('æº–å‚™åˆ—å°æ™‚ç™¼ç”ŸéŒ¯èª¤');
                document.body.removeChild(printFrame);
                updateStatus('åˆ—å°å¤±æ•—');
            });
        }
        
        // ç‚ºåˆ—å°æ¸²æŸ“é é¢
        async function renderPageForPrint(pageNum, container) {
            const page = await AppState.pdfDoc.getPage(pageNum);
            const viewport = page.getViewport({ scale: 2 });
            
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            
            // è€ƒæ…®é é¢æ—‹è½‰
            const rotation = AppState.pageRotations && AppState.pageRotations[pageNum] || 0;
            if (rotation !== 0) {
                context.save();
                context.translate(canvas.width / 2, canvas.height / 2);
                context.rotate(rotation * Math.PI / 180);
                context.translate(-canvas.width / 2, -canvas.height / 2);
            }
            
            await page.render({
                canvasContext: context,
                viewport: viewport
            }).promise;
            
            if (rotation !== 0) {
                context.restore();
            }
            
            // å¦‚æœæœ‰ç·¨è¼¯å…§å®¹ï¼Œç–ŠåŠ ä¸Šå»
            if (AppState.pages[pageNum] && AppState.pages[pageNum].objects && AppState.pages[pageNum].objects.length > 0) {
                const tempCanvas = new fabric.Canvas(null, {
                    width: viewport.width,
                    height: viewport.height
                });
                
                await new Promise((resolve) => {
                    fabric.util.enlivenObjects(AppState.pages[pageNum].objects, (objects) => {
                        objects.forEach(obj => {
                            obj.scaleX = (obj.scaleX || 1) * (viewport.width / AppState.fabricCanvas.width);
                            obj.scaleY = (obj.scaleY || 1) * (viewport.height / AppState.fabricCanvas.height);
                            obj.left = obj.left * (viewport.width / AppState.fabricCanvas.width);
                            obj.top = obj.top * (viewport.height / AppState.fabricCanvas.height);
                            tempCanvas.add(obj);
                        });
                        tempCanvas.renderAll();
                        resolve();
                    });
                });
                
                context.drawImage(tempCanvas.getElement(), 0, 0);
            }
            
            // å‰µå»ºé é¢å®¹å™¨
            const pageDiv = document.createElement('div');
            pageDiv.className = 'page';
            const img = document.createElement('img');
            img.src = canvas.toDataURL('image/png');
            pageDiv.appendChild(img);
            container.appendChild(pageDiv);
        }
        
        // æœå°‹æ–‡å­—åŠŸèƒ½
        function searchText() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header">
                        <span>æœå°‹æ–‡å­—</span>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-bottom: 15px;">
                            <input type="text" id="search-input" placeholder="è¼¸å…¥è¦æœå°‹çš„æ–‡å­—..." style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>
                                <input type="checkbox" id="search-case-sensitive">
                                å€åˆ†å¤§å°å¯«
                            </label>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label>
                                <input type="checkbox" id="search-whole-word">
                                å…¨å­—åŒ¹é…
                            </label>
                        </div>
                        <div id="search-results" style="margin-top: 20px; max-height: 200px; overflow-y: auto;"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">é—œé–‰</button>
                        <button class="btn btn-primary" onclick="performSearch()">æœå°‹</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // èšç„¦åˆ°æœå°‹è¼¸å…¥æ¡†
            document.getElementById('search-input').focus();
            
            // æŒ‰ Enter éµæœå°‹
            document.getElementById('search-input').onkeypress = (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            };
        }
        
        // åŸ·è¡Œæœå°‹
        async function performSearch() {
            const searchTerm = document.getElementById('search-input').value.trim();
            if (!searchTerm) {
                alert('è«‹è¼¸å…¥æœå°‹æ–‡å­—');
                return;
            }
            
            const caseSensitive = document.getElementById('search-case-sensitive').checked;
            const wholeWord = document.getElementById('search-whole-word').checked;
            const resultsDiv = document.getElementById('search-results');
            
            resultsDiv.innerHTML = '<p>æœå°‹ä¸­...</p>';
            
            const results = [];
            
            try {
                for (let pageNum = 1; pageNum <= AppState.totalPages; pageNum++) {
                    const page = await AppState.pdfDoc.getPage(pageNum);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    
                    let searchIn = pageText;
                    let searchFor = searchTerm;
                    
                    if (!caseSensitive) {
                        searchIn = searchIn.toLowerCase();
                        searchFor = searchFor.toLowerCase();
                    }
                    
                    if (wholeWord) {
                        const regex = new RegExp(`\\b${searchFor}\\b`, caseSensitive ? 'g' : 'gi');
                        const matches = searchIn.match(regex);
                        if (matches) {
                            results.push({
                                page: pageNum,
                                count: matches.length,
                                preview: getTextPreview(pageText, searchTerm, caseSensitive)
                            });
                        }
                    } else {
                        const index = searchIn.indexOf(searchFor);
                        if (index !== -1) {
                            const count = (searchIn.match(new RegExp(searchFor, 'g')) || []).length;
                            results.push({
                                page: pageNum,
                                count: count,
                                preview: getTextPreview(pageText, searchTerm, caseSensitive)
                            });
                        }
                    }
                }
                
                // é¡¯ç¤ºçµæœ
                if (results.length > 0) {
                    resultsDiv.innerHTML = `<p>æ‰¾åˆ° ${results.length} å€‹é é¢åŒ…å« "${searchTerm}"ï¼š</p>`;
                    results.forEach(result => {
                        const resultItem = document.createElement('div');
                        resultItem.style.cssText = 'padding: 10px; margin: 5px 0; background: #f5f5f5; border-radius: 4px; cursor: pointer;';
                        resultItem.innerHTML = `
                            <strong>ç¬¬ ${result.page} é </strong> (${result.count} è™•åŒ¹é…)<br>
                            <small style="color: #666;">${result.preview}</small>
                        `;
                        resultItem.onclick = () => {
                            goToPage(result.page);
                            document.querySelector('.modal.active').remove();
                        };
                        resultsDiv.appendChild(resultItem);
                    });
                } else {
                    resultsDiv.innerHTML = `<p>æœªæ‰¾åˆ° "${searchTerm}"</p>`;
                }
            } catch (error) {
                console.error('æœå°‹æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
                resultsDiv.innerHTML = '<p style="color: red;">æœå°‹æ™‚ç™¼ç”ŸéŒ¯èª¤</p>';
            }
        }
        
        // ç²å–æ–‡å­—é è¦½
        function getTextPreview(text, searchTerm, caseSensitive) {
            const searchIn = caseSensitive ? text : text.toLowerCase();
            const searchFor = caseSensitive ? searchTerm : searchTerm.toLowerCase();
            const index = searchIn.indexOf(searchFor);
            
            if (index === -1) return '';
            
            const start = Math.max(0, index - 30);
            const end = Math.min(text.length, index + searchTerm.length + 30);
            let preview = text.substring(start, end);
            
            if (start > 0) preview = '...' + preview;
            if (end < text.length) preview = preview + '...';
            
            return preview;
        }
        
        // ä¸Šå‚³åœ–ç‰‡åŠŸèƒ½
        function uploadImage() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        fabric.Image.fromURL(event.target.result, (img) => {
                            img.set({
                                left: 100,
                                top: 100,
                                scaleX: 0.5,
                                scaleY: 0.5
                            });
                            AppState.fabricCanvas.add(img);
                            saveToHistory();
                            updateStatus('å·²æ·»åŠ åœ–ç‰‡');
                        });
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }
        
        // æ·»åŠ å°ç« åŠŸèƒ½
        function addStamp(type) {
            const stamps = {
                approved: { text: 'APPROVED', color: '#4CAF50' },
                rejected: { text: 'REJECTED', color: '#f44336' },
                confidential: { text: 'CONFIDENTIAL', color: '#FF9800' },
                copy: { text: 'COPY', color: '#2196F3' },
                urgent: { text: 'URGENT', color: '#F44336' },
                paid: { text: 'PAID', color: '#4CAF50' }
            };
            
            const stamp = stamps[type];
            if (!stamp) return;
            
            const text = new fabric.Text(stamp.text, {
                left: 100,
                top: 100,
                fontSize: 48,
                fontWeight: 'bold',
                fill: stamp.color,
                opacity: 0.7,
                angle: -30,
                fontFamily: 'Arial'
            });
            
            AppState.fabricCanvas.add(text);
            saveToHistory();
            updateStatus(`å·²æ·»åŠ  ${stamp.text} å°ç« `);
            
            // é—œé–‰æ¨¡æ…‹æ¡†
            document.querySelector('.modal.active').classList.remove('active');
        }
        
        // æ·»åŠ ç°½ååŠŸèƒ½
        function addSignature() {
            const modal = document.getElementById('signature-modal');
            modal.classList.add('active');
        }
        
        // åˆå§‹åŒ–ç°½åæ¿
        function initializeSignaturePad() {
            const canvas = document.getElementById('signature-pad');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            // è¨­ç½®ç•«å¸ƒå¤§å°
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // ç¹ªè£½åŠŸèƒ½
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                lastX = (e.clientX || e.touches[0].clientX) - rect.left;
                lastY = (e.clientY || e.touches[0].clientY) - rect.top;
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                const currentX = (e.clientX || e.touches[0].clientX) - rect.left;
                const currentY = (e.clientY || e.touches[0].clientY) - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.stroke();
                
                lastX = currentX;
                lastY = currentY;
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            // æ»‘é¼ äº‹ä»¶
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // è§¸æ§äº‹ä»¶
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                startDrawing(e);
            });
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                draw(e);
            });
            canvas.addEventListener('touchend', stopDrawing);
            
            // æ¸…é™¤æŒ‰éˆ•
            document.getElementById('clear-signature').onclick = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            };
            
            // ä¿å­˜æŒ‰éˆ•
            document.getElementById('save-signature').onclick = () => {
                const dataURL = canvas.toDataURL();
                fabric.Image.fromURL(dataURL, (img) => {
                    img.set({
                        left: 100,
                        top: 100,
                        scaleX: 0.5,
                        scaleY: 0.5
                    });
                    AppState.fabricCanvas.add(img);
                    saveToHistory();
                    updateStatus('å·²æ·»åŠ ç°½å');
                });
                
                // é—œé–‰æ¨¡æ…‹æ¡†
                modal.classList.remove('active');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            };
        }
        
        // é«˜äº®æ–‡å­—åŠŸèƒ½
        function highlightText() {
            AppState.currentTool = 'highlight';
            updateToolState();
            updateStatus('é¸æ“‡è¦é«˜äº®çš„å€åŸŸ');
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // è¼‰å…¥è¨­å®š
            loadSettings();
            
            // ç•¶ç°½åæ¨¡æ…‹æ¡†é¡¯ç¤ºæ™‚åˆå§‹åŒ–
            const signatureModal = document.getElementById('signature-modal');
            if (signatureModal) {
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.target.classList.contains('active')) {
                            setTimeout(initializeSignaturePad, 100);
                        }
                    });
                });
                observer.observe(signatureModal, { attributes: true });
            }
        });
    </script>
    
    <!-- è¼‰å…¥ Telegram Bot æ¨¡çµ„ -->
    <script src="telegram-bot.js"></script>
</body>
</html>